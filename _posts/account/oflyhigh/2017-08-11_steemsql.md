
---
title: 'ç¬¬ä¸€æ¬¡ä½¿ç”¨STEEMSQLæŸ¥è¯¢è°·å“¥ç‚¹åæ•°æ®'
permlink: steemsql
catalog: true
toc_nav_num: true
toc: true
date: 2017-08-11 12:05:33
categories:
- cn
tags:
- cn
- steemsql
- cn-programming
- steemdev
- python
thumbnail: https://steemitimages.com/DQmYLCqyew8mnT9ZUWRtvuVfmQbFC2uTnqP7V1osNaYsANc/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


![](https://steemitimages.com/DQmYLCqyew8mnT9ZUWRtvuVfmQbFC2uTnqP7V1osNaYsANc/image.png)

é¦–å…ˆæ„Ÿè°¢ @arcange æä¾› SteemSQLæœåŠ¡ï¼ŒSteemSQLæ˜¯ä¸€ä¸ªåŒ…å«STEEMåŒºå—é“¾æ•°æ®çš„å…¬å…±MS-SQLæ•°æ®åº“ã€‚

First thanks @arcange for providing SteemSQL services, SteemSQL is a public MS-SQL database with all the blockchain data in it.

----

å…¶å®SteemSQLä¸Šçº¿ä¹‹åˆæˆ‘é©¬ä¸Šè¯•ç”¨è¿‡ï¼Œä½†æ˜¯å› ä¸ºå½“æ—¶ç¬¬ä¸€ç‰ˆåªåŒ…å«ä¸€äº›åŒºå—é“¾çš„transactionæ•°æ®ï¼Œç”¨èµ·æ¥è¿˜æœ‰è¯¸å¤šä¸ä¾¿ï¼Œæ‰€ä»¥åæ¥SteemDataä¸€ä¸Šçº¿ï¼Œæˆ‘å°±è½¬ç§»æˆ˜åœºäº†ï¼Œå°½ç®¡æˆ‘ä»æ¥æœªæ¥è§¦è¿‡MongoDBã€‚ä¹‹åï¼ŒSteemDataä¸€ç›´èƒ½æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œæ‰€ä»¥å°±æ‡’å¾—è½¬æˆ˜å›æ¥ï¼Œä½†æ˜¯æˆ‘ä¾ç„¶é»˜é»˜å…³æ³¨è¿™ä¸ªé¡¹ç›®ï¼Œçœ‹ç€å®ƒç»è¿‡åå¤šæ¬¡å‡çº§å˜å¾—è¶Šæ¥è¶Šå¥½ï¼Œä¹Ÿçœ‹ç€å¾ˆå¤šSTEEMITçš„æœ‹å‹å¼€å§‹ä½¿ç”¨è¿™ä¸ªæ•°æ®åº“ã€‚

ä»Šå¤© @jubi å’Œæˆ‘è¯´ä½¿ç”¨SteemSQL æŸ¥è¯¢ä¸­æ–‡æ ‡é¢˜é‡åˆ°ä¸€äº›å›°éš¾ï¼Œç”¨` WHERE title like '%ç¬¬ä¸€æ¬¡%'`ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸åˆ°ç›¸å…³æ•°æ®ï¼Œä½†æ˜¯ç”¨è‹±æ–‡åˆ™å¯ä»¥æŸ¥è¯¢ï¼Œæˆ‘ç­”åº”å¸®ä»–çœ‹çœ‹ã€‚è¯è¯´æœ€è¿‘ä»–åœ¨ä¸­æ–‡åŒºä¸¾åŠä¸¤æœŸ***è°·å“¥ç‚¹å***æ´»åŠ¨ï¼Œäººæ°”ç«çˆ†ï¼Œè€Œ***ç¬¬ä¸€æ¬¡***å°±æ˜¯ç¬¬äºŒæœŸæ´»åŠ¨çš„ä¸»é¢˜ã€‚ä¼°è®¡å¤ªç«çˆ†ï¼Œå‚ä¸äººæ•°ä¼—å¤šï¼Œå•çº¯åœ°é äººå·¥çœ‹å¸–å’Œæ•´ç†æœ‰äº›è¾›è‹¦ï¼Œäºæ˜¯ä»–æƒ³ç€ç”¨ç¨‹åºæŠŠæ•´ç†å¸–å­è‡ªåŠ¨åŒ–å§ã€‚å¤§å®¶éƒ½åœ¨æˆé•¿ï¼Œè¿™éå¸¸å¥½ã€‚è¯´åˆ°SteemSQLæœ€è¿‘ï¼Œä¸­æ–‡åŒºçš„å¾ˆå¤šæœ‹å‹éƒ½åœ¨ç”¨ï¼Œæ¯”å¦‚ @ace108, ä»¥åŠ @joythewanderer, ä»–ä»¬è¿˜å‡ºè¿‡ä¸€äº›å‘å¯¼è´´ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥å»ç¿»ä¸€ç¿»ã€‚

åˆæ‰¯è¿œäº†ï¼Œè¨€å½’æ­£ä¼ 

# å®‰è£…pymssql

æˆ‘æ‡’å¾—å»ä¸‹æ¡Œé¢è½¯ä»¶ï¼Œè¿˜æ˜¯ç›´æ¥ç”¨Pythonå§
Pythonä¸‹å¯ä»¥ä½¿ç”¨pyodbc ä»¥åŠ pymssqlå•¥çš„ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯pymssql

ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸‹ç›´æ¥å®‰è£…æŒ‡ä»¤
`pip3 install pymssql`

å˜ï¼ŒæŠ¥ä¸€å¤§å †é”™è¯¯ï¼Œ å…¶å®ƒå•¥çš„éƒ½ä¸è®¤è¯†ï¼Œæˆ‘å…³æ³¨çš„å¤§æ¦‚ä¸‰å¥
>Running setup.py bdist_wheel for pymssql ... error
>   setup.py: Not using bundled FreeTDS
>_mssql.c:266:22: fatal error: sqlfront.h: No such file or directory

å»å®˜ç½‘æŸ¥äº†ä¸€ä¸‹
http://pymssql.org/en/stable/building_and_developing.html
æœ‰è¿™æ ·ä¸€å¥
>FreeTDS >= 0.91 including development files. Please research your OS usual software distribution channels, e.g, freetds-dev or freetds-devel packages.

ç¼ºå•¥è¡¥å•¥
`sudo apt-get install freetds-dev`
`pip3 install pymssql`

æˆåŠŸï¼

# æ‰§è¡Œ

SteemSQL å®˜ç½‘åœ°å€ï¼š http://steemsql.com/
ä½†æ˜¯å¾ˆé—æ†¾ä¸Šè¾¹çš„é“¾æ¥ä¿¡æ¯ä¸å…¨ï¼Œæ²¡æœ‰Databaseçš„ä¿¡æ¯
æˆ–è®¸è¿ä¸Šä¹‹åï¼Œå°±ç›´æ¥å¯ä»¥æŸ¥å‡ºæ¥ï¼Œä¸è¿‡æˆ‘åœ¨SteemSQLå‘å¸ƒçš„å¸–å­ä¸­æ‰¾åˆ°äº†è¿æ¥ä¿¡æ¯
>Server: sql.steemsql.com
User: steemit
Password: steemit
Database name: DBSteem

`import pymssql`
`conn = pymssql.connect(host ="sql.steemsql.com",database ="DBSteem",user="steemit",password="steemit")`
åœ¨Pythoné‡Œç”¨è¿™ä¸ªç›´æ¥è¿ä¸Šäº†ï¼Œå¾ˆå¥½ã€‚

è¯•ç€æŸ¥äº†ä¸€ä¸‹
`cur = conn.cursor()`
`cur.execute("SELECT title FROM Comments WHERE author= 'oflyhigh' and title like '%åŒºå—é“¾%'")`

å› ä¸ºæˆ‘æ˜¨å¤©åˆšå†™äº†ä¸€ç¯‡æ–‡ç« ï¼Œ
[ä½¿ç”¨PHPæŸ¥è¯¢STEEMåŒºå—é“¾ / Using PHP to query the STEEM blockchain](https://steemit.com/cn/@oflyhigh/php-steem-using-php-to-query-the-steem-blockchain)

ä¸ºå•¥å°±æŸ¥ä¸åˆ°å‘¢ï¼Ÿ

ç„¶åæ¢ä¸ªå…³é”®è¯
`cur.execute("SELECT title FROM Comments WHERE author= 'oflyhigh' and title like '%PHP%'")`
>('How  to install Apacheã€MYSQLã€PHP5 and run a Wordpress website on BananaPi',), ('æ‹–äº†å¾ˆä¹…çš„äº‹æƒ…ç»ˆäºå®Œæˆäº†ï¼Œå°†PHP 5.4 å‡çº§åˆ° PHP 5.6',), ('ä½¿ç”¨PHPæŸ¥è¯¢STEEMåŒºå—é“¾ / Using PHP to query the STEEM blockchain',)

æŸ¥å‡ºæ¥çš„æ–‡ç« åŒ…å«æˆ‘çš„æœ€æ–°æ–‡ç« 

# æ’æŸ¥

é‚£ä¹ˆæ˜¯å“ªé‡Œæœ‰é—®é¢˜å¯¼è‡´çš„å‘¢ï¼Ÿ
æˆ‘ç¬¬ä¸€ä¸ªç›´è§‰æ˜¯ç¼–ç é—®é¢˜

ç„¶åï¼Œæˆ‘æŠŠé“¾æ¥æ”¹æˆ
`conn = pymssql.connect(host ="sql.steemsql.com",database ="DBSteem",user="steemit",password="steemit", charset="utf8")`
ç»“æœä¾æ—§

åˆå»æŠŠFreeTDSçš„é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šå­—ç¬¦é›†è®¾ç½®
`sudo find / -name freetds.conf`
`sudo vi /etc/freetds/freetds.conf`
`sudo vi /usr/share/freetds/freetds.conf`
é€šé€šåŠ ä¸Šï¼š
`client charset = UTF-8`
ç»“æœä¾æ—§

å°½ç®¡æˆ‘è§‰å¾—æ²¡å¿…è¦ï¼Œä½†æ˜¯ï¼Œåˆåœ¨Pythonæ–‡ä»¶ä¸­åŠ ä¸Š
`#-*- coding: utf-8 -*-`
ç»“æœä¾æ—§

ä»æŸ¥å‡ºçš„ç»“æœèƒ½æ­£å¸¸æ˜¾ç¤ºæ¥çœ‹ï¼Œæ•°æ®åº”è¯¥æ˜¯æŒ‰UTF-8å­˜å‚¨çš„ï¼Œé‚£é—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿä¸‰æŠŠæ¿æ–§ç”¨å®Œäº†ï¼Œæˆ‘çš„æ‰¾æ–°æ‹›æ•°äº†ã€‚

ç ”ç©¶åŠå¤©ï¼Œå‘ç°ä¸ªæ–°ç©æ„ï¼Œå°±æ˜¯***åœ¨æŸ¥è¯¢å†…å®¹å‰åŠ ä¸ªN***
è¯¦æƒ…è§
https://docs.microsoft.com/en-us/sql/t-sql/data-types/nchar-and-nvarchar-transact-sql
>Prefix Unicode character string constants with the letter N. Without the N prefix, the string is converted to the default code page of the database. This default code page may not recognize certain characters.

æŠŠæˆ‘çš„æŸ¥è¯¢æ”¹æˆï¼š
`cur.execute("SELECT title FROM Comments WHERE author= 'oflyhigh' and title like N'%åŒºå—é“¾%'")`

æŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼š
>æˆ‘ä¹Ÿæ›¾ç»æ–‡é’è¿‡ï¼Œ18å¹´å‰å†™çš„å°è¯— ã€ŠèŠ±å„¿ã€‹ï¼Œå­¦laoyaoï¼Œå’±ä¹Ÿæ”¾åˆ°åŒºå—é“¾ä¸Š
ä½¿ç”¨PHPæŸ¥è¯¢STEEMåŒºå—é“¾ / Using PHP to query the STEEM blockchain
çæƒœç¾½æ¯› / STEEMåŒºå—é“¾å¿ å®çš„è®°å½•ä½ çš„æ“ä½œ / è·å¾—å…±åŒæ“ä½œè´¦æˆ·çš„çœŸå®æ“ä½œè€…
YY ä¸€ä¸ªåŸºäºSTEEMåŒºå—é“¾çš„èŠå¤©å·¥å…·
STEEMåŒºå—é“¾å¿ å®çš„è®°å½•ä½ çš„è¨€è¡Œ&æ“ä½œ

ç»ˆäºå¯è¡Œäº†

# å†æŸ¥è°·æ­Œç‚¹åè´´

ç°åœ¨åœ¨å›å¤´æŸ¥å‚åŠ è°·æ­Œç‚¹åçš„ç¬¬äºŒæ¬¡æ´»åŠ¨çš„å¸–å­ï¼Œä¸»é¢˜ä¸º`ç¬¬ä¸€æ¬¡`

`cur.execute("SELECT title,created FROM Comments WHERE title like N'%ç¬¬ä¸€æ¬¡%' and created > '2017/08/01' order by created")`
`rows = cur.fetchall()`
`for row in rows: print("{}\t{}".format(row[0], row[1]))`

ç»“æœå¦‚ä¸‹ï¼š

>Magic Clay ä½ ç¬¬ä¸€æ¬¡ç”¨é»åœŸåšäº†ä»€ä¹ˆå‘¢ï¼Ÿ   2017-08-01 14:13:45
ç¬¬ä¸€æ¬¡èŠ±è²»å¾steemitè³ºåˆ°çš„æ”¶ç›Š ! The first time I get the 'real' money from steemit!     2017-08-02 06:11:21
ç¬¬ä¸€æ¬¡ä¸ä½ ä»¬çš„å¯¹è¯ï¼Œmy first conversation with y'all .  2017-08-03 18:32:51
ç¬¬ä¸€æ¬¡åœ¨steemit cnå‘æ–‡ æ„Ÿè°¢steemitè®©æˆ‘èƒ½æ¥è§¦Bitcoin     2017-08-04 17:09:18
ç¬¬ä¸€æ¬¡äººä½“è§£å‰–è¯¾ä¸Šçš„æƒŠæ‚šäº‹ä»¶    2017-08-07 11:30:48
ç¬¬ä¸€æ¬¡ - é›¢é„‰åˆ¥äº• | â€œè°·å“¥ç‚¹åâ€æ´»åŠ¨      2017-08-09 07:10:30
ç›¸çº¦å¤§ç¾æ–°ç–†,ç¬¬ä¸€æ¬¡åœ¨ç¬¬13å±Šå…¨å›½å†¬è¿ä¼šç°åœº  Meet the beauty of Xinjiang,first time in China national winter games        2017-08-09 08:31:15
My first encounter with steemit/æˆ‘ä¸steemitçš„ç¬¬ä¸€æ¬¡é‚‚é€… | è°·æ­Œç‚¹å      2017-08-09 10:15:33
æˆ‘äººç”Ÿçš„Nç§ç¬¬ä¸€æ¬¡       2017-08-09 10:31:48
ç¬¬ä¸€æ¬¡è®¤è¯†è¿™ä¸ªä¸–ç•Œ      2017-08-09 10:52:12
ç¬¬ä¸€æ¬¡ - è‹±åœ‹è¡Œå±±ç¯‡ "è°·æ­Œç‚¹å"æ´»å‹• Hiking South Downs Way England       2017-08-09 11:00:00
ã€å‚åŠ è°·å“¥ç‚¹åã€‘æˆ‘åœ¨Steemitçš„ç¬¬ä¸€æ¬¡å‘å¸– 2017-08-09 13:07:39
ç¬¬ä¸€æ¬¡ç¦»å¼€ç†Ÿæ‚‰çš„åœ°æ–¹å¤–å‡ºé—¯è¡    2017-08-09 14:12:33
æˆå°±äººç”Ÿçš„ç¬¬ä¸€æ¬¡        2017-08-09 14:26:54
ç¬¬ä¸€æ¬¡ // First Time    2017-08-09 17:11:42
äººç”Ÿç¬¬ä¸€æ¬¡â€”â€”ä¸ä»…æœ‰é…¸ç”œè‹¦è¾£ï¼Œæ›´æœ‰æ‚²æ¬¢ç¦»åˆ        2017-08-09 18:12:18
ç¬¬ä¸€æ¬¡ - The First Time (Chinese content only but feel free to comment in English if you understsand) - (by @ace108)    2017-08-10 00:34:03
ç¬¬ä¸€æ¬¡ï¼Œ        ç»†çœ‹å¦ˆå¦ˆçš„çš±çº¹| â€œè°·å“¥ç‚¹åâ€æ´»åŠ¨  2017-08-10 01:11:24
çˆ±ä¸Šç¬¬ä¸€æ¬¡--First Exploration   2017-08-10 01:22:15
å¦‚ä½•çœ‹å¾…ä½ äººç”Ÿä¸­çš„ç¬¬ä¸€æ¬¡ï¼Ÿ      2017-08-10 01:24:48
?? è€é“èŒ¶é¤¨ ??ï¼è«‹ä¸Šåï¼Œå–æ¯èŒ¶ï¼Œèªªé»äº‹ï¼›ä»Šæ—¥è©±é¡Œï¼ç¬¬ä¸€æ¬¡ ï¼ˆè·¨åŸŸåˆä½œï¼šèŒ¶é¤¨ï¼¸è°·å“¥ç‚¹åï¼‰ ??  LAODR Tea House  ??  170810   2017-08-10 02:06:03
#éš¨ç­†2 ç¬¬ä¸€æ¬¡ | è°·å“¥ç‚¹å        2017-08-10 03:55:33
ç¬¬ä¸€æ¬¡åœ¨æ˜Ÿçº§å¤§é…’åº—åƒé¥­  2017-08-10 04:09:12
ç¬¬ä¸€æ¬¡ç»æ‹--æœ€åçš„åˆæ‹  The first but also last love.   2017-08-10 04:37:30
ç¬¬ä¸€æ¬¡å“å‘³äººç”Ÿç™¾æ€ My First Time - Ups and Downs in Life        2017-08-10 05:10:51
ç¬¬ä¸€æ¬¡ â”€â”€ æˆ‘å’Œæˆ‘çš„å‹ç”Ÿ  2017-08-10 05:14:57
ç¬¬ä¸€æ¬¡æ‹¿åˆ°åœ¨steemitä¸Šå†™ä½œçš„é’±   2017-08-10 05:44:24
é¢†å¯¼ï¼Œä»Šå¤©æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å–é…’ï¼Œå¯ä¸å¯ä»¥ã€‚ã€‚ã€‚        2017-08-10 06:52:42
ç¬¬ä¸€æ¬¡å»åšç‰©é¦†ä¹‹ä¸­å›½å¤ä»£çš„é…’å…· The ancient wine cups of the Chinese history     2017-08-10 11:40:54
ç¬¬ä¸€æ¬¡å»æ²¹èœèŠ±åœ°é‡Œç©ï¼Œç§ä¸‹äº†å¿ƒçµé‡Œçš„æ ‘  2017-08-10 13:56:00
My first and long leave from my hometown // ç¬¬ä¸€æ¬¡é›¢é„‰åˆ¥äº•      2017-08-10 18:45:03
The  first time i made my rose steamed buns   ç¬¬ä¸€æ¬¡åšç«ç‘°èŠ±é¦’å¤´ï¼      2017-08-10 21:50:18
ç¬¬ä¸€æ¬¡ â€” ä½åœ¨å¤§å­¦å®¿èˆç»å† / è°·å“¥ç‚¹åæ´»åŠ¨ | My university life, my first time living in a university hostel      2017-08-10 23:03:06
ç¬¬ä¸€æ¬¡ - åœ¨ç¬¬ä¸€æ¬¡å®¶æ—æ—…è¡Œ - å°ä¸­ (å…§æœ‰å®¶æ—æ—…è¡Œçš„å¿ƒå¾—ï¼‰| The first time - My first family trip - Tai Chung       2017-08-11 01:16:42
å¾ˆå¤šç¬¬ä¸€æ¬¡çš„ç¬¬ä¸€æ¬¡ | "è°·å“¥ç‚¹å" 2017-08-11 01:30:00
ç¬¬ä¸€æ¬¡â€œä½“éªŒâ€åšçˆ¶æ¯çš„æ„Ÿè§‰ / The First Time for Being a "Parent" | è°·æ­Œç‚¹å       2017-08-11 04:10:27
ç¬¬ä¸€æ¬¡æ¥åæ–‡åŒºæ—¶çš„æƒ…æ™¯ä¸åæ–‡åŒºå¦‚ä½•å‘å±•  2017-08-11 06:23:21
ç¬¬ä¸€æ¬¡æ³¨å†ŒåŸŸå  2017-08-11 08:18:54
ç¬¬ä¸€æ¬¡ï¼Œç§‘å­¸ç ”ç©¶çš„ç¬¬ä¸€æ¬¡/ â€œè°·å“¥ç‚¹åâ€æ´»åŠ¨ The First time: The Tirst Time for Scientific Research 2017-08-11 09:15:57
ç¬¬ä¸€æ¬¡å»æµ·è¾¹ â€”â€” â€œæ¸©è‰¯æ­ä¿­è®©â€çš„åŒ—å¨å°”å£«æµ·æ»¨å°é•‡å…°è¿ªå¾·è¯º  2017-08-11 09:28:42
ç¬¬äºŒæœŸâ€œè°·å“¥ç‚¹åâ€æ´»å‹•ï¼š ç¬¬ä¸€æ¬¡ é›¢é„‰åˆ¥äº•  2017-08-11 09:36:03
æˆ‘çš„ç¬¬ä¸€æ¬¡çš„è™›æ“¬äººç”Ÿ    2017-08-11 10:22:18
ä¸€å¤©ä¹‹å†…çš„ä¸¤ä¸ªç¬¬ä¸€æ¬¡    2017-08-11 10:37:51

æ€»ç®—æ²¡è¾œè´Ÿ @jubi å°å‹çš„ä¿¡ä»»

# è¡¥å……

@jubi ç”¨å¦å¤–ä¸€ç§æ–¹æ³•
`WHERE contains(title, 'ç¬¬ä¸€æ¬¡')`
å¯ä»¥æŸ¥å‡ºéƒ¨åˆ†æ•°æ®
æˆ‘æœç´¢äº†ä¸€ä¸‹ï¼Œcontainsæ˜¯åŸºäºå…¨æ–‡ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢
ä½†ç»“æœå¯èƒ½å—ç³»ç»Ÿåˆ†è¯æ–¹æ³•çš„å½±å“å¯¼è‡´ä¸å…¨

å½“ç„¶ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘ä¸ä¼šä½¿ç”¨çš„ç¼˜æ•… ğŸ˜­

----

ä¹ŸåŠ ä¿©***ç¬¬ä¸€æ¬¡***å…³é”®å­—å‚èµ›ï¼Œé‡åœ¨å‚ä¸
å¦å¤–ï¼Œä¸‡ä¸€ä¸­å¥–å‘¢ï¼Œå“ˆå“ˆå“ˆ

- - -

This page is synchronized from the post: [ç¬¬ä¸€æ¬¡ä½¿ç”¨STEEMSQLæŸ¥è¯¢è°·å“¥ç‚¹åæ•°æ®](https://steemit.com/@oflyhigh/steemsql)
