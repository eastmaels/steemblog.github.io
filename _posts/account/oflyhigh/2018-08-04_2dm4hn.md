
---
title: '木有人用的脚本也要除虫！'
permlink: 2dm4hn
catalog: true
toc_nav_num: true
toc: true
date: 2018-08-04 13:20:12
categories:
- resteem
tags:
- resteem
- reblog
- cn
- cn-programming
- steemit
thumbnail: https://cdn.steemitimages.com/DQmWLdCVuyhJpwAvts4xoNePQCvkCczvYwiad9JYQnBbNir/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


之前很早之前发布个小页面工具，检查谁转发了你的帖子[《Who resteemed/rebloged your posts? / 谁转发了你的文章？》](https://steemit.com/cn/@oflyhigh/who-resteemed-rebloged-your-posts)，尽管很丑陋，但是还算可以用，所以就那么扔着，我也懒得理它。

![](https://cdn.steemitimages.com/DQmWLdCVuyhJpwAvts4xoNePQCvkCczvYwiad9JYQnBbNir/image.png)
(图源 ：[pixabay](https://pixabay.com/))

今天一个朋友和我说：“O哥，你的工具出BUG啦！显示的结果乱七八糟的。”这怎么可能呢，一定是你使用姿势不对吧？不过我还是打开页面看了一下。

![](https://cdn.steemitimages.com/DQmbykPUTBgKStYeS7nmyNhYFggAPkCrN3g3Syrhvdi6zKV/image.png)
我晕，上边一堆空白的数据是什么鬼啊？我最近似乎也没转发谁的帖子啊！原来真的是出BUG了。

看了一下我脚本的思路，是先获取用户最新的几条帖子，然后再遍历获取每个帖子的转发者，出现上述故障，貌似是前者出错了。

于是测试了一下获取帖子的API
>`{"jsonrpc": "2.0", "method": "call", "params": ["follow_api", "get_blog", ["oflyhigh", 0, 2]], "id": 1}`

返回结果的头两条数据大致是这个样子：
![](https://cdn.steemitimages.com/DQmSyeJFicf2CNTyA5Pn2EkWBUp9jZHKbKqjjiQAuWLqLCJ/image.png)
也就是说，在这样的返回结果外，首先返回了2条垃圾数据。不知道这是最近节点引进的BUG还是新功能？😀

不过不管是啥了，我还是在我脚本中直接打补丁吧。
![](https://cdn.steemitimages.com/DQmYdESXjbh7L73qNHVaMea598gC8Cmi1zsVhyXShx1DKzk/image.png)
在我的循环中加了一个判断过滤掉这部分垃圾数据就好啦。

再来测试一下：
![](https://cdn.steemitimages.com/DQmUwq5piF4myr3G2ozxxH82xSU4mbu2jq7FpL2dbNSqUZk/image.png)

搞定啦。对了， 新的地址换到这里啦：
https://www.eztk.net/tools/check_resteem.php
估计也没几个人用，不过该改的BUG还是要改的嘛。

- - -

This page is synchronized from the post: [木有人用的脚本也要除虫！](https://steemit.com/@oflyhigh/2dm4hn)
