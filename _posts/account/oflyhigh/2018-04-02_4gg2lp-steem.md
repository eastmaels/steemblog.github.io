
---
title: 'STEEM是如何产出以及如何分配的'
permlink: 4gg2lp-steem
catalog: true
toc_nav_num: true
toc: true
date: 2018-04-02 13:51:21
categories:
- steemdev
tags:
- steemdev
- steemit
- steem
- cn-programming
- cn
thumbnail: https://steemitimages.com/DQmNaNf8gbdMjkQcmoXzHduQw7zPwCAcsp67FqFZx4a4arB/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


[STEEM的Github](https://github.com/steemit/steem)上关于STEEM的年通胀率以及分配情况介绍如下：

>10% APR inflation narrowing to 1% APR over 20 years.
75% of inflation to "Proof of Brain" social consensus algorithm.
15% of inflation to stake holders.
10% of inflation to block producers.

![](https://steemitimages.com/DQmNaNf8gbdMjkQcmoXzHduQw7zPwCAcsp67FqFZx4a4arB/image.png)
(图源 ：[pixabay](https://pixabay.com))

但是我一直没有个直观的概念，比如说每天(或者每个块)到底产生多少STEEM，以及如何分配的？于是就想着看看代码，学习一下。

# 通胀率

通胀率每个块动态调整，计算因素包含：
* **`初始通胀率`**
* **`通胀率收缩周期`**
* **`以及终止通胀率`**
* **`当前区块数`**

计算代码如下：
![](https://steemitimages.com/DQmUpYejWQaUSbPCXw4itgTY5nBmuw9zAmkZf5sZ4erSbcc/image.png)

用Python改写上述代码并计算，得出如下结果：
![](https://steemitimages.com/DQmajTvFJpZx6tUbhsnHkuCy5steu9U6ga9ex9CCHJEENbf/image.png)
亦即当前块的年通胀率为：8.94%

# 每块新产生的STEEM

知道了当前的年通胀率以及当前的总供应量，我们可以计算出当前块产生的新的STEEM，计算公式（代码）如下：

>`auto new_steem = ( props.virtual_supply.amount * current_inflation_rate ) / ( int64_t( STEEM_100_PERCENT ) * int64_t( STEEM_BLOCKS_PER_YEAR ) );`

我们可以看到计算新生STEEM，采取的当前供应量x当前通胀率计算出年新产生的STEEM总量，再除以每年产生的区块数。

这样计算方式有问题就是没有计算复利，但是实际上是有复利在内的。但是我们从代码中知道每250K区块，通胀率是缩减的，很好奇这部分和复利部分哪个多哪个少呢？

需要注意一下**`props.virtual_supply`** 为 **`asset`**类型，对于STEEM而言，精确到小数点后三位，亦即
>`#define STEEM_PRECISION_STEEM (3)`

所以此处计算的结果应为浮点数(同样受精度影响，但是我们只是简单估算，就不处理这个问题了）

用Python改写上述代码并计算，得出如下结果：
![](https://steemitimages.com/DQmZpyzDFTpBkdbPbTv8enwbhyYjJ1EiJAtZcLmr3BqCpbo/image.png)
亦即当前每块约产出2.329个STEEM

# 产出STEEM的分配

好了，现在开始~~**分赃了**~~收获劳动成果了。
![](https://steemitimages.com/DQmTN1ETEE3UJ2WBMyxtpNHQYNvAaRZZD4G3UW7W5C9ywaX/image.png)

大致来讲：
* 给内容创作者（包括点赞者）75%
* 给股东 15%
* 给见证人10%

但是见证人，会根据见证人类型不同，给予不同的奖励倍数，所以见证人得到的收益会有所波动，但是整体上与上述分配比例差异不大

以下简单计算一下收益分配，平均而言大致是这样的：
![](https://steemitimages.com/DQmewV8Fq5hmytcsqYtQUAPEdkFtBYDad6HVz78hsZn6YVu/image.png)
这个是一个块的，而STEEM每3秒一个块，每天产出是多少，大家自己计算喽。

# 结论

好像不用做啥结论，都在正文里呢，那就这样吧。

- - -

This page is synchronized from the post: [STEEM是如何产出以及如何分配的](https://steemit.com/@oflyhigh/4gg2lp-steem)
