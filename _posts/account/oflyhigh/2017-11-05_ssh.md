
---
title: 'SSH服务指定其它端口，指定多个端口'
permlink: ssh
catalog: true
toc_nav_num: true
toc: true
date: 2017-11-05 01:50:15
categories:
- ssh
tags:
- ssh
- sshd
- putty
- cn
- cn-programming
thumbnail: https://steemitimages.com/DQmNvxkqz3kxsnRvwNBPJNWcdLnsCXxWpd7x89bfoBVXr7m/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


我有几台服务器以及几台VPS，平日都是使用SSH来管理。一般来讲没什么问题的，偶尔有时候一两台登陆不上去，我可以用其它能连接的服务器做跳板链接，懒惰的人总是有懒惰的办法。

但是最近一段时间，连不上的情况越来越严重，我跳啊跳啊的，累的不行了。

我一直以为是ISP和谐了我服务器/VPS的IP，毕竟我的SSH服务用了一个不常用的端口，一般来讲，没道理和谐啊。直到有一天SSH始终连不上的时候，我无意之中ping了一下IP，OMG，竟然能ping通。
![](https://steemitimages.com/DQmNvxkqz3kxsnRvwNBPJNWcdLnsCXxWpd7x89bfoBVXr7m/image.png)
虽然延迟大了点，但是至少说明IP没有被封锁。

那么我们可以指定SSH服务使用其它端口啊，就无需用其它服务器做跳板了。


# SSH服务指定其它端口

其实我出于安全考虑，我的SSH服务禁用了22端口，而使用了一个很不常用的端口号,指定其它端口的操作很简单。

以我用的Ubuntu 16.04 LTS为例，putty登陆后：
`sudo vi /etc/ssh/sshd_config`

将下列内容
`# What ports, IPs and protocols we listen for`
`Port 22`
修改为
`# What ports, IPs and protocols we listen for`
`Port 56789`

然后重启sshd服务：
`sudo service ssh  restart`

开启新的putty窗口，输入***IP***和新的端口号***`56789`***，点击***OPEN***
![](https://steemitimages.com/DQmY3y6B8JnR54DzkB3i97tToii9WxxcR7N1yHg9ckHF5iZ/image.png)

点击***Yes***
![](https://steemitimages.com/DQmP2LVZPsQ5QxKGcYrVqryCVwtQt29ZNoLfhJD4rFnnW2S/image.png)

就会出现正常的登陆窗口了，说明我们的设置生效了。

# SSH服务指定多个端口

尽管我们又给SSH服务换了一个端口，但是鬼知道ISP啥时候抽风又给封掉呢。一旦封掉，又得用跳板了。

那么我们何不一下子多加一些端口呢？***据说有钱人买东西都是一下子买两个的，用一个扔一个！***我们没钱买东西，但是给SSH服务多加几个端口，用一个闲置几个，也体验一把有钱人的感觉！

其实多加几个端口的操作是超级简单啊，和上边完全一样

`# What ports, IPs and protocols we listen for`
`Port 56789`
`Port 12345`
`Port 88888`

把Port多加几行就可以了😭
好了，开始做个有钱人吧。

- - -

This page is synchronized from the post: [SSH服务指定其它端口，指定多个端口](https://steemit.com/@oflyhigh/ssh)
