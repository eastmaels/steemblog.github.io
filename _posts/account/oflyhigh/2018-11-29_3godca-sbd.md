
---
title: '文章奖励中的SBD为何还在？'
permlink: 3godca-sbd
catalog: true
toc_nav_num: true
toc: true
date: 2018-11-29 00:32:27
categories:
- cn
tags:
- cn
- sbd
- steem
- market
- witness-category
thumbnail: https://cdn.steemitimages.com/DQmctmEWMEDngiBa4fuofsJMYe6AwKH5SN8SBT2pNVJF9EQ/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


在之前一个帖子里，我曾预测因为`current_median_history_price`滞后于市场价，所以当`current_median_history_price`更新后，`SBD_PRINT_RATE`将会为0，文章中的SBD奖励会与我们说再见。

![](https://cdn.steemitimages.com/DQmctmEWMEDngiBa4fuofsJMYe6AwKH5SN8SBT2pNVJF9EQ/image.png)
(图源 ：[pixabay](https://pixabay.com/))

然而这么多天过去了，文章奖励中依旧能看到SBD的身影，`SBD_PRINT_RATE`也没有归零，这是为何呢？

![](https://cdn.steemitimages.com/DQmRm5hvUBRtyNsgtnHUsMtbVCzhj5qHzN5Hn2RCL2WEaPu/image.png)

其实之前我写的一篇英语文章已经解释了这个问题：
* [Why is median_history_price no longer the median of feed price? My investigation.](https://steemit.com/witness-category/@oflyhigh/why-is-medianhistoryprice-no-longer-the-median-of-feed-price-my-investigation)

简单地来讲，就是由于***STEEM的喂价更新的机制，保证SBD的供给的占比不超过整个供给的10%***，当触发这个保护机制时，`current_median_history_price`不再由见证人喂价中间价以及3.5日历史喂价中间价计算得出，而是使用下图箭头指向的算式求出。

![](https://cdn.steemitimages.com/DQmeXHPjd931ujx4akfnMcVGBpxwy41C4DC4hUbCbwg9jQj/image.png)

也就是说这个机制算出的喂价保证了SBD的百分比不超过10%，那么你可能会问，虽然不超过10%，但是还有可能等于10%啊，这样的话`SBD_PRINT_RATE`不就是0了吗？

或许以下这段代码会解释这个问题：
>`auto percent_sbd = uint16_t( ( ( fc::uint128_t( ( dgp.current_sbd_supply * get_feed_history().current_median_history ).amount.value ) * STEEM_100_PERCENT ) / dgp.virtual_supply.amount.value ).to_uint64() );`

上述代码对求得的SBD百分比取整，也就是说如果算出来的是999.9999999，那么返回的值也是999，这样无论多么贴近10%（1000），那么得出的SBD百分比都会是9.99%（999），而算出的`SBD_PRINT_RATE`就是1%（100）了。

我用Python代码模拟了`SBD_PRINT_RATE`计算过程，如果不对SBD百分比取整`SBD_PRINT_RATE`等于0.
![](https://cdn.steemitimages.com/DQmTh5waR4LmGsJdT7ppJeayW9qkSVHuR9JSNxPBrLd8XhA/image.png)

如果对SBD百分比取整`SBD_PRINT_RATE`等于1%（100）
![](https://cdn.steemitimages.com/DQmNX9NhgF8wChgdEgNMbUyBPNqUmLmLkM59fGFn4QQQFii/image.png)

是不是很有意思？另外我想，因为`current_median_history_price`是每小时更新的，如果这期间SBD被大量发行，那么`percent_sbd`是有可能超过10%的，但是在`SBD_PRINT_RATE`等于1%的情况下，SBD好像没机会被大量发行啊？

看来文章奖励中的SBD，是会一直存在下去啦，想说拜拜，还不容易呢！

# 相关链接

* [Why is median_history_price no longer the median of feed price? My investigation.](https://steemit.com/witness-category/@oflyhigh/why-is-medianhistoryprice-no-longer-the-median-of-feed-price-my-investigation)

----
<center><strong>Vote For Me As Witness</strong>
https://steemit.com/~witnesses type in **`oflyhigh`** and click ***`VOTE`***
[![](https://cdn.steemitimages.com/DQmX5NysqT44FBa3bhuWqQ69nAbseu8Nt5YQPn2pYejPVxA/image.png)](https://steemit.com/~witnesses)
[Vote @oflyhigh via Steemconnect](https://steemconnect.com/sign/account-witness-vote?witness=oflyhigh&approve=1)
<strong>Thank you!</strong></center>

- - -

This page is synchronized from the post: [文章奖励中的SBD为何还在？](https://steemit.com/@oflyhigh/3godca-sbd)
