
---
title: 'secp256k1-py å®‰è£…ä»¥åŠå‘½ä»¤è¡Œæ“ä½œ'
permlink: secp256k1-py
catalog: true
toc_nav_num: true
toc: true
date: 2018-01-13 02:57:57
categories:
- python
tags:
- python
- secp256k1
- secp256k1-py
- cn-programming
- cn
thumbnail: https://steemitimages.com/DQmQcXkbdbWV5zrXMdr4YUnNBKyy3kaEPaYqQx2S63YQpbE/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


é˜…è¯»steem-pythonä»£ç æ—¶å‘ç°äº†[secp256k1-py](https://github.com/ludbb/secp256k1-py) è¿™ä¸ªåº“ã€‚å®˜æ–¹ä»‹ç»æ˜¯ï¼š
>Python FFI bindings for libsecp256k1(an experimental and optimized C library for EC operations on curve secp256k1).

ç®€å•æ¥è®²å°±æ˜¯ä¸“é—¨ç”¨äºæ›²çº¿secp256k1æ¤­åœ†æ›²çº¿æ“ä½œçš„Cåº“libsecp256k1çš„Python FFI(foreign function interface)ç»‘å®šã€‚å¾ˆæ‹—å£æ˜¯å§ï¼Œæ²¡åŠæ³•ï¼Œæ°´å¹³æœ‰é™ğŸ˜³

![](https://steemitimages.com/DQmQcXkbdbWV5zrXMdr4YUnNBKyy3kaEPaYqQx2S63YQpbE/image.png)
(å›¾æº ï¼š[pixabay](https://pixabay.com))


# å®‰è£…

åŸæœ¬ä»¥ä¸ºå®‰è£…ä¼šå¾ˆç®€å•ï¼Œä½†æ˜¯å®é™…å®‰è£…æ—¶å´å‡ºäº†ä¸€äº›é—®é¢˜ï¼Œç°è®°å½•å¦‚ä¸‹ã€‚

#### å®‰è£…æŒ‡ä»¤

å®˜æ–¹æä¾›çš„ä¸ä½¿ç”¨é¢„å…ˆç¼–è¯‘å¥½çš„åº“çš„å®‰è£…æ–¹æ³•ä¸ºï¼š
`pip install --no-binary secp256k1`

æˆ‘æ‰§è¡Œä¸Šè¿°æŒ‡ä»¤ï¼Œæç¤ºï¼š
>You must give at least one requirement to install (see "pip help install")

åœ¨è¿™ä¸ªç½‘é¡µä¸­ï¼Œå­¦ä¹ åˆ°--no-binary é€‰é¡¹ååº”è¯¥è·Ÿæ ¼å¼æ§åˆ¶
https://pip.pypa.io/en/stable/reference/pip_install/#install-no-binary
`--no-binary <format_control>`

æ‰€ä»¥ä¸Šè¿°æŒ‡ä»¤åº”ä¸ºï¼š
***`pip install --no-binary :all: secp256k1`***

å½“ç„¶å¦‚æœå›¾çœäº‹ï¼Œç›´æ¥æ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤å°±è¡Œäº†
***`pip install secp256k1`***
åæ­£å¯¹æˆ‘è€Œè¨€æ˜¯æ²¡å•¥åŒºåˆ«ã€‚

ä½†æ˜¯ï¼Œè¿™å°±å®Œäº‹äº†å—ï¼ŸNOï¼Œå®‰è£…è¿˜æ˜¯å‡ºäº†ä¸€å †é—®é¢˜ï¼Œè§æ‹›æ‹†æ‹›å§ã€‚

#### `'pkg-config' is required`

å‡ºé”™ä¿¡æ¯ï¼š
![](https://steemitimages.com/DQmfLhg8NqW3hKSa81xc1Rh25Pfnp4V3bwUuaPBg3XrTCq1/image.png)
>'pkg-config' is required to install this package. Please see the README for details.

è§£å†³æ–¹æ³•ï¼š
å®‰è£…pkg-config
***`sudo apt-get install pkg-config`***

#### `autoreconf: not found`

å‡ºé”™ä¿¡æ¯ï¼š
>/tmp/pip-build-ar3agy47/secp256k1/libsecp256k1/autogen.sh: 3: /tmp/pip-build-ar3agy47/secp256k1/libsecp256k1/autogen.sh: autoreconf: not found

è§£å†³æ–¹æ³•ï¼š
å®‰è£…autoconf
***`sudo apt-get install autoconf`***


#### `'LIBTOOL' is undefined`

å‡ºé”™ä¿¡æ¯ï¼š
>  Makefile.am:3: error: Libtool library used but 'LIBTOOL' is undefined

è§£å†³æ–¹æ³•ï¼š
å®‰è£…LIBTOOL
***`sudo apt-get install libtool`***

å¯èƒ½è¿˜éœ€è¦ä¸€äº›ä¾èµ–ï¼Œä½†å¯èƒ½æˆ‘çš„ç³»ç»Ÿä¸­å·²ç»å®‰è£…æœ‰å¯¹åº”çš„åŒ…æˆ–è€…åº“ï¼Œå°±æ²¡æç¤ºï¼Œæ‰€ä»¥æœ‹å‹ä»¬å¦‚æœå®‰è£…é‡åˆ°é—®é¢˜ï¼Œéœ€è¦è‡ªå·±ä»”ç»†æŸ¥çœ‹å‡ºé”™ä¿¡æ¯ï¼Œä»å‡ºé”™ä¿¡æ¯ä¸­æ‰¾å‡ºéœ€è¦çš„å†…å®¹ã€‚

# å‘½ä»¤è¡Œä½¿ç”¨

åºŸäº†ä¹ç‰›äºŒè™ä¹‹åŠ›ï¼Œæ€»ç®—æŠŠè¿™ä¸ªä¸œä¸œè£…ä¸Šäº†ï¼Œç„¶åè®©æˆ‘ä»¬æ¥è¯•è¯•å®ƒçš„å¨åŠ›å§ã€‚

#### ç”Ÿæˆç§é’¥å’Œå…¬é’¥

å‘½ä»¤å¦‚ä¸‹ï¼š
`python -m secp256k1 privkey -p`

![](https://steemitimages.com/DQmSuQFT2LVvUyhUVFcwYntgv6Ew9QYMiEYfP2Ax5RvP47P/image.png)
>c6e193266883a500c6e51a117e012d96ad113d5f21f42b28eb648be92a78f92f
Public key: 0314bf901a6640033ea07b39c6b3acb675fc0af6a6ab526f378216085a93e5c7a2

è¿™é€Ÿåº¦ï¼Œå—·å—·å¿«å•Šï¼Œçœ‹æ¥æˆ‘å¯ä»¥è€ƒè™‘ç”Ÿæˆè£è€€åœ°å€äº†ã€‚

#### æ¶ˆæ¯ç­¾å

æ¶ˆæ¯ç­¾åå°±æ˜¯ä½¿ç”¨ç§é’¥å¯¹æ–‡æœ¬ä¿¡æ¯è¿›è¡Œç­¾å
```
python -m secp256k1 sign \
	-k c6e193266883a500c6e51a117e012d96ad113d5f21f42b28eb648be92a78f92f \
	-m hello
```

å…¶ä¸­ç§é’¥ä¸ºæˆ‘ä»¬ä¹‹å‰ç”Ÿæˆçš„ç§é’¥ï¼Œæ˜æ–‡æ¶ˆæ¯ä¸ºhello
æœ€ç»ˆç”Ÿæˆçš„ç­¾åä¸ºï¼š
>3045022100a314a579fb9f30a804c172eec4881ed603e661eed692797149dfdbce24d671d202203ccfab0603ad97c34864caa22d42a24d0cb5750fcb159476b8ae30a11edc0ed6

#### æ ¡éªŒç­¾å

æ ¡éªŒç­¾åå°±æ˜¯ä½¿ç”¨ä½¿ç”¨æ¶ˆæ¯ã€å…¬é’¥ã€ç­¾åï¼Œæ¥æ ¡éªŒç­¾åæ˜¯å¦æ˜¯å…¬é’¥å¯¹åº”çš„ç§é’¥æ‰€ç­¾å‘
```
python -m secp256k1 checksig \
	-p 0314bf901a6640033ea07b39c6b3acb675fc0af6a6ab526f378216085a93e5c7a2 \
	-m hello \
	-s 3045022100a314a579fb9f30a804c172eec4881ed603e661eed692797149dfdbce24d671d202203ccfab0603ad97c34864caa22d42a24d0cb5750fcb159476b8ae30a11edc0ed6
```

ä»¥ä¸ŠæŒ‡ä»¤æ‰§è¡Œåè¿”å›ç»“æœä¸ºï¼š***`True`***ï¼Œè¡¨ç¤ºæ ¡éªŒé€šè¿‡

#### ç”Ÿæˆå¯æ¢å¤å…¬é’¥çš„ç­¾å

```
python -m secp256k1 signrec \
	-k c6e193266883a500c6e51a117e012d96ad113d5f21f42b28eb648be92a78f92f \
	-m hello
```

æœ€ç»ˆç”Ÿæˆçš„ç­¾åå¦‚ä¸‹ï¼š
>a314a579fb9f30a804c172eec4881ed603e661eed692797149dfdbce24d671d23ccfab0603ad97c34864caa22d42a24d0cb5750fcb159476b8ae30a11edc0ed6 0

#### ä»ç­¾åä¸­æ¢å¤å…¬é’¥

```
python -m secp256k1 recpub \
	-s a314a579fb9f30a804c172eec4881ed603e661eed692797149dfdbce24d671d23ccfab0603ad97c34864caa22d42a24d0cb5750fcb159476b8ae30a11edc0ed6 \
	-i 0\
	-m hello
```

æœ€ç»ˆæˆ‘ä»¬æ¢å¤å‡ºæ¥çš„å…¬é’¥ä¸ºï¼š
>Public key: 0314bf901a6640033ea07b39c6b3acb675fc0af6a6ab526f378216085a93e5c7a2

# æ€»ç»“

æœ¬æ–‡ä»‹ç»secp256k1-py çš„å®‰è£…ä»¥åŠå‘½ä»¤è¡Œæ“ä½œã€‚

å› ä¸ºlibsecp256k1æ˜¯ä¸“é—¨ä¸ºsecp256k1æ›²çº¿å®ç°çš„Cåº“ï¼Œè€Œsecp256k1-pyæ˜¯libsecp256k1çš„FFIç»‘å®šï¼Œæ‰€ä»¥é‚£æ“ä½œé€Ÿåº¦æ˜¯æ æ æ»´ã€‚

æœ¬æ–‡åªæ˜¯ç•¥ä½œæ¢ç´¢ï¼Œä¹‹åæˆ‘ä»¬ä¼šè¿›ä¸€æ­¥å­¦ä¹ secp256k1-pyã€‚

# ç›¸å…³é“¾æ¥

* https://github.com/ludbb/secp256k1-py
* https://github.com/bitcoin-core/secp256k1
* https://en.wikipedia.org/wiki/Foreign_function_interface
* https://pip.pypa.io/en/stable/reference/pip_install/#install-no-binary

- - -

This page is synchronized from the post: [secp256k1-py å®‰è£…ä»¥åŠå‘½ä»¤è¡Œæ“ä½œ](https://steemit.com/@oflyhigh/secp256k1-py)
