
---
title: 'å¼€å§‹åŒæ­¥èŠ‚ç‚¹æ•°æ®'
permlink: 5mqv5m
catalog: true
toc_nav_num: true
toc: true
date: 2018-01-29 14:22:21
categories:
- bitshares
tags:
- bitshares
- bts
- cn
- cn-programming
- study
thumbnail: https://steemitimages.com/DQmbetK9MHQbWok8gPBTMkvuJQe6meQP5rRKdXQbwgvCUc5/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


åœ¨ä¸Šåˆçš„æ–‡ç« ä¸­ï¼Œæˆ‘å°è¯•äº†[ç¼–è¯‘BitShares Core](https://steemit.com/bitshares/@oflyhigh/bitshares-core)ï¼Œä½†æ˜¯ç¼–è¯‘å®Œäº†æ€»è¦ç”¨èµ·æ¥è¯•è¯•å˜›ï¼Œå¯æƒœæˆ‘è¢«ä»VPSè¸¢ä¸‹çº¿äº†ã€‚åŸæœ¬è®¡åˆ’ç­‰ç½‘ç»œæ¢å¤æ­£å¸¸ä¸çƒ¦æˆ‘äº†ï¼Œæˆ‘å°±ç™»é™†ä¸Šå»ææï¼Œç»“æœç­‰å•Šç­‰ï¼Œå§‹ç»ˆä¸Šä¸å»ã€‚äºæ˜¯åªå¥½ä»å¦å¤–ä¸€å°VPSä¸Šè·³ä¸Šæ¥ç©äº†ï¼ŒçœŸæ˜¯çƒ¦ã€‚

![](https://steemitimages.com/DQmbetK9MHQbWok8gPBTMkvuJQe6meQP5rRKdXQbwgvCUc5/image.png)

# witness_node

æŸ¥çœ‹å¸®åŠ©
`./witness_node --help`
å¥½å¤šé€‰é¡¹ï¼Œçœ‹ä¸æ‡‚ï¼Œä»¥åæ…¢æ…¢ç ”ç©¶å§ã€‚

ç”Ÿæˆæ•°æ®ç›®å½•
`./witness_node -d witness_node_data_dir`
å¦‚æœæˆ‘ä»¬ä¸æ‰‹åŠ¨æŒ‡å®šæ•°æ®ç›®å½•ï¼Œå®ƒä¼šåœ¨witness_node åŒçº§ç›®å½•ä¸‹ç”Ÿæˆ`witness_node_data_dir`


æ•°æ®ç›®å½•ä¸­åŒ…å«ä¸€ä¸ªæ–‡ä»¶å’Œä¸¤ä¸ªç›®å½•
`blockchain  config.ini  logs`
çœ‹äº†ä¸€ä¸‹`config.ini`ï¼Œå¥½å¤šé…ç½®é€‰é¡¹ï¼Œæ˜è¿·ã€‚

ç”Ÿæˆæ•°æ®ç›®å½•çš„ç›®çš„æ˜¯ç”Ÿæˆ`config.ini`é…ç½®æ–‡ä»¶ï¼Œæœ‰äº†é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹`witness_node`è¿›è¡Œè¯¸å¤šè®¾ç½®äº†ã€‚

# å‡å°‘å†…å­˜ã€ç£ç›˜å ç”¨


å…³é—­p2pæ—¥å¿—
åœ¨config.iniä¸­æ³¨é‡Šæ‰ï¼š`filename=logs/p2p/p2p.log`

#### --plugins

å¦‚æœä¸æŒ‡å®š--pluginså‚æ•°ï¼Œé‚£ä¹ˆèŠ‚ç‚¹é»˜è®¤åŠ è½½ä¸‹åˆ—æ’ä»¶
* witness
* account_history
* market_history

æˆ‘ä»¬å¯ä»¥ç”¨`--plugins witness`æ¥åªå¯ç”¨witnessæ’ä»¶ï¼Œæˆ–è€…ç”¨`--plugins witness account_history`å¯ç”¨witnesså’Œaccount_historyä¸¤ä¸ªæ’ä»¶ï¼Œæ’ä»¶åç§°ä¹‹å‰ç”¨ç©ºæ ¼åˆ†éš”

#### account_history plugin

account_historyæ’ä»¶å¯ä»¥è®¾ç½®å¦‚ä¸‹é€‰é¡¹
é€‰é¡¹|å€¼|è¯´æ˜
----|----|----
--track-account|arg| Account ID to track history for (may specify multiple times)
--partial-operations|arg|Keep only those operations in memory that are related to account history tracking
--max-ops-per-account|arg|Maximum number of operations per account will be kept in memory

#### market_history plugin
market_history ä¹Ÿæœ‰ä¸€äº›é€‰é¡¹
é€‰é¡¹|å€¼|è¯´æ˜
----|----|---
--bucket-size| arg (=[60,300,900,1800,3600,14400,86400]) |Track market history by grouping orders into buckets of equal size measured in seconds specified as a JSON array of numbers
--history-per-size| arg (=1000) |How far back in time to track history for each bucket size, measured in the number of buckets (default: 1000)
--max-order-his-records-per-market|arg (=1000)| Will only store this amount of matched orders for each market in order history for querying, or those meet the other option, which has more data (default: 1000)
--max-order-his-seconds-per-market|arg (=259200)|Will only store matched orders in last X seconds for each market in order history for querying, or those meet theother option, which has more data(default: 259200 (3 days))

***å¬è¯´è¿™äº›é€‰é¡¹ä¸ä½†å½±å“è¿è¡Œæ—¶çš„å†…å­˜å ç”¨ï¼ŒåŒæ ·å½±å“åŒæ­¥çš„é€Ÿåº¦ï¼Œæ‰€ä»¥æˆ‘è®¡åˆ’åªå¯ç”¨witnessæ’ä»¶ï¼Œè¿™æ ·å°±ä¼šæœ‰æœ€å°çš„å†…å­˜å ç”¨ä»¥åŠåŒæ­¥æ•ˆç‡ã€‚(å¾…å®è·µéªŒè¯)***

# åŒæ­¥èŠ‚ç‚¹

è¯•äº†åŠå¤©ï¼Œå¼€å§‹åŒæ­¥æ•°æ®å§ï¼š

`./witness_node --rpc-endpoint "127.0.0.1:8090" --plugins "witness" --replay-blockchain`


å…¶ä¸­ï¼š`--rpc-endpoint "127.0.0.1:8090"`å¼€å¯èŠ‚ç‚¹ API æœåŠ¡

![](https://steemitimages.com/DQmP6Upyi7fQJezJWfoM59XNZ8KHtkfVPyykWQMkE3nU37Z/image.png)
å¥½åƒä¼¼ä¹å¤§æ¦‚è¦å¾ˆä¹…ã€‚


# æµ‹è¯•

æ¥è¯•ä¸€ä¸‹APIæœåŠ¡
`curl --data '{"jsonrpc": "2.0", "method": "call", "params": [0, "get_accounts", [["1.2.0"]]], "id": 1}' http://127.0.0.1:8090/rpc`

æ™•ï¼Œè¡¨ç¤ºç»“æœä¸€å›¢ç³Ÿï¼Œä¸€å †å­—ç¬¦æŒ¤ä¸€èµ·å»äº†ã€‚

å°†ç»“æœæ ¼å¼åŒ–ä¸€ä¸‹ï¼Œè¿™æ ·çœ‹èµ·æ¥ç¾ç¾çš„ï¼š
![](https://steemitimages.com/DQmYav8vapYKe1UHPEU7A6X4rEBhXRwdVbUR96U3K3s5Ncj/image.png)

å†æ¥
`curl --data '{"jsonrpc": "2.0", "method": "call", "params": ["database", "get_block", [1000]], "id": 1}' http://127.0.0.1:8090/rpc`
![](https://steemitimages.com/DQmPjdL43VW9exwZvWXC7ZoQaUi587Xzk4iNtMJWK16eT93/image.png)


`curl --data '{"jsonrpc": "2.0", "method": "call", "params": ["database", "get_block", [10000000]], "id": 1}' http://127.0.0.1:8090/rpc`
![](https://steemitimages.com/DQmTg8YxSCr8UNbq9vGJvqAHectLqUpzLttp7fhn6aKnFFK/image.png)
é¢ï¼Œæ€¥åŠŸå†’è¿›äº†å§ï¼Œè¿˜æ²¡åŒæ­¥åˆ°10000000å‘¢ã€‚

# å…¶å®ƒ

æµ‹è¯•è¿™åŠŸå¤«çœ‹äº†ä¸€ä¸‹ï¼Œå·²ç»åŒæ­¥äº†300å¤šä¸‡ä¸ªå—ï¼Œç°åœ¨ä¸€å…±å‘¢æ¥è¿‘2400ä¸‡ä¸ªå—ï¼Œç…§æ­¤è®¡ç®—è²Œä¼¼åº”è¯¥å¾ˆå¿«å•ŠğŸ˜ã€‚ä¸è¿‡å¥½åƒå‰æœŸçš„å—ä¸­æ²¡å•¥æ•°æ®ï¼ŒåæœŸæ•°æ®é‡å¤§äº†ï¼Œä¼°è®¡åŒæ­¥èµ·æ¥å°±æ…¢äº†ã€‚

æ…¢æ…¢ç­‰å§ï¼Œç­‰å®ƒåŒæ­¥å®Œï¼Œæˆ‘å†å»æ·±å…¥äº†è§£ä¸€ä¸‹ã€‚

# å‚è€ƒé“¾æ¥

* [å°è¯•ç¼–è¯‘BitShares Core](https://steemit.com/bitshares/@oflyhigh/bitshares-core)
* https://github.com/bitshares/bitshares-core
* [BTSäº¤æ˜“æ‰€å¯¹æ¥æŒ‡å—ï¼ˆå•èŠ‚ç‚¹ç‰ˆï¼‰by @abit](https://github.com/abitmore/bts-cn-docs/blob/master/BTS%E4%BA%A4%E6%98%93%E6%89%80%E5%AF%B9%E6%8E%A5%E6%8C%87%E5%8D%97%EF%BC%88%E5%8D%95%E8%8A%82%E7%82%B9%E7%89%88%EF%BC%89.txt)
* [Memory Reduction for Nodes](https://github.com/bitshares/bitshares-core/wiki/Memory-reduction-for-nodes)
* https://github.com/bitshares/bitshares-core/releases
* http://man7.org/linux/man-pages/man1/timedatectl.1.html
* http://man7.org/linux/man-pages/man8/systemd-timesyncd.8.html

- - -

This page is synchronized from the post: [å¼€å§‹åŒæ­¥èŠ‚ç‚¹æ•°æ®](https://steemit.com/@oflyhigh/5mqv5m)
