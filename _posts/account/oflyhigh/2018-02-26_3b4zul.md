
---
title: '公众号恢复正常啦，宇宙首富的梦想破灭'
permlink: 3b4zul
catalog: true
toc_nav_num: true
toc: true
date: 2018-02-26 13:25:48
categories:
- cn
tags:
- cn
- wechat
- steem
- rpc
- node
thumbnail: https://steemitimages.com/DQmdY2DNMMtXZo5pEvGvZrbzmmwzWbCj8NNFR1uVQT3HxKn/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


这两天有好多个朋友上来问我，“O哥，你的微信公众号不好用啦！”  我一看果然不好用啦，一测试，是STEEM RPC节点的问题，我就放心啦，节点问题嘛，等他们修复就好啦。

![](https://steemitimages.com/DQmdY2DNMMtXZo5pEvGvZrbzmmwzWbCj8NNFR1uVQT3HxKn/image.png)
(图源 ：[pixabay](https://pixabay.com))

# 节点出故障啦

结果等啊等啊，等了好久终于可以访问了，然后我回复我的朋友们，公众号好用啦，去用吧。结果人家使用后给我回复，O哥，你的公众号虽然能用，但是这数据完全不对啊。

这怎么可能呢，我可都是从STEEM的节点获得的数据呢，竟然冤枉我的公众号不好用，太气人了😡！然后我自己去测试了一下，哇靠，果然这数据差的不是一点半点啊。

比如说我的Voting Power在70%左右，但是微信公众号算出来的是90%多，更激动人心的是，我的SBD明明100多，微信公众号显示的是500多。我用curl直接连接STEEM的不同节点，发现不是我公众号的问题，而是不同的节点给出的数据不一样！

比如说从A节点读到的VP是70%，从B节点读到的VP却是90%；从A节点读到的SBD是100多，从B节点读到的SBD却是500多；还有其它一些问题等等。

# 首富美梦

于是我不由得幻想起来，如果这时候，我透过B节点提现，是不是可以转出去500多SBD呢？😍

 后来想想，好像这事不靠谱，因为节点可以自己搭建，如果这样可以透支的话，那我建个节点，然后把自己资产改成1000000000000000000000 SBD，然后再提出来，岂不是瞬间成宇宙首富了。这明显不现实。

哎，宇宙首富的美梦持续了不到2分钟就破灭了😭

# 分析问题

既然成不了宇宙首富，我还是研究研究咋解决公众号的问题吧，毕竟朋友们还很信赖，不能让大家失望。修改公众号有几个思路，一是降级版本，使用老版本RPC NODE;  二是找到并解决当前版本里的BUG；三是找到一个好用的新版本。

#### 降级版本？
降级版本有个问题，我公众号中使用了一些新版本中才有的东西，降级的话，就要全部改掉。而STEEM 的RPC早晚会都升级到新版本，那么我之后还要改回来。

#### 解决BUG？
当前节点的BUG我分析了一下，我测试了一下当前节点的版本信息，貌似没啥问题：
```
{'id': 1,
 'jsonrpc': '2.0',
 'result': {'blockchain_version': '0.19.4',
            'fc_revision': '2945196ca5ead5049e78679d69affea98d97e27b',
            'steem_revision': '2945196ca5ead5049e78679d69affea98d97e27b'}}
```

所以我猜测应该是jussi的问题，这个是一个代理层，从后端的STEEMD读取数据。现在的可能是它缓存了一些老数据，和STEEMD的数据不一致，该更新没更新。

但是我不知道咋知道节点用的哪个jussi版本，这挺愁人的。至于去解决这个问题，饶了我吧，我就一半吊子程序员。

# 换新节点？

既然降级以及解决BUG都不现实，那就只好找一个好用的节点喽。

试了一下api.steemdev.com 版本也是0.19.4，但是返回的数据都是正确的，那就先用这个喽。


# 公众号好用啦

其实水了大半天，我就是想告诉大家，公众号又好用啦。

不过steemit官方最近更新节点有点勤，一会0.19.4，一会0.19.2的，如果没用一些新东西倒是无所谓，如果用了0.19.4中才有的特性，那么说不定啥时候又失灵了。

不过也管不了那么多了，毕竟搭一个全节点自己用，对我而言还不太现实，那就将就吧。

# 公众号添加方法

还没加公众号的，快点上车啊

* 方式一：
    进入微信通讯录->点击公众号->点右上角加号->搜索steemit，关注即可。

* 方式二：
    直接扫描以下二维码：

![](https://steemitimages.com/DQmNxMW2tParyESCyp1s6fm5SjPmNSibkct4wcdaQcTA5BD/image.png)

- - -

This page is synchronized from the post: [公众号恢复正常啦，宇宙首富的梦想破灭](https://steemit.com/@oflyhigh/3b4zul)
