
---
title: '重装了一下Banana Pi M3'
permlink: banana-pi-m3
catalog: true
toc_nav_num: true
toc: true
date: 2018-07-23 13:22:09
categories:
- cn
tags:
- cn
- bananapi
- raspbian
- iot
- raspberrypi
thumbnail: https://cdn.steemitimages.com/DQmYLMpNo83KfmLX34o1QHZ7GVGCYMtP4rrUwUJZXExh7DT/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


家里我跑着好几个Banana Pi，其中一个我装了乱七八糟的好多东西，作为一名强迫症和洁癖患者，已经到了无法忍受的地步了。然后我就一直计划着把这个系统重新弄一下，但是作为一名懒病和拖延症患者，又觉得能拖一天是一天吧。

![](https://cdn.steemitimages.com/DQmYLMpNo83KfmLX34o1QHZ7GVGCYMtP4rrUwUJZXExh7DT/image.png)

今天终于下定决心不能再拖下去了，否则黄瓜菜都凉啦（黄瓜菜旁白：谁喊我？我怎么凉啦？）

# 操作步骤

话说重做Banana Pi系统是很麻烦的事情，一般来讲要做如下事情：
* 下载镜像
* 将镜像烧写到TF卡
* 用TF卡启动系统
* 通过串口线(tx, rx, gnd)连接到电脑
* 通过Putty连接串口登陆Banana Pi
* 将镜像写入到Banana Pi内置的eMMC存储
* 启动系统

啊，一想想这些乱七八糟的步骤就让人抓狂，不过既然决定了去做，就硬着头皮去弄喽，于是找出一堆TF卡，准备开搞。

# 失败尝试

可是等等，TF卡插入电脑中，我发现正是我想要的镜像，然后回头看一下全过程，突然发觉我为何要从头搞起？以前之所以要从头搞，是因为新板卡拿来里边还没有系统，但是现在板上有系统，TF卡里有镜像，我完全可以只做后边的步骤啊！

于是将TF卡插入到一个USB读卡器后插入到Banana Pi M3，然后使用fdisk -l查看存储设备。
>`sudo fdisk -l`

![](https://cdn.steemitimages.com/DQmRduECyc4TNZb1y3i21qZpTNUQUWJ9Se4nvF3pLeJhZcC/image.png)
红框中的就是通过USB读卡器连上的TF卡哦。

将TF卡挂载到/mnt目录
>`sudo mount /dev/sdb1 /mnt`

将镜像写入到Banana Pi内置的eMMC存储
>`sudo dd if=/mnt/2016-07-12-raspbian-lite-bpi-m3.img of=/dev/mmcblk1 bs=10MB`

结果等了半天却提示我写入失败，`/dev/mmcblk1`空间不足，额，我猜测这和我当前正在使用`/dev/mmcblk1`上的系统有关，看来想偷懒是不行啦。

# 重做步骤

于是重新进行将镜像写入TF卡，用TF卡启动系统，然后再插入USB读卡器（镜像文件），然后再执行：
>`sudo mount /dev/sdb1 /mnt`
>`sudo dd if=/mnt/2016-07-12-raspbian-lite-bpi-m3.img of=/dev/mmcblk1 bs=10MB`


有点慢，不过终于搞定了
>209+1 records in
209+1 records out
2097152000 bytes (2.1 GB) copied, 480.697 s, 4.4 MB/s

然后拔掉TF卡、拔掉USB读卡器，长按电源按钮重启，就可以啦。

--

哎，看来偷懒是不能偷懒的，不过还好，总算搞定啦。当然了，剩下的还有一堆乱七八糟的事要做，那就再说喽。

- - -

This page is synchronized from the post: [重装了一下Banana Pi M3](https://steemit.com/@oflyhigh/banana-pi-m3)
