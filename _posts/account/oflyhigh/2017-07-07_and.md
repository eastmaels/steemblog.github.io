
---
title: 'å…³äºæ”¶ç›Šåˆ†äº«åŠŸèƒ½ç†è§£çš„ç»ˆæç‰ˆ(ä¸“å®¶æŒ‡ç‚¹ & ä»£ç æ ¸è¯)'
permlink: and
catalog: true
toc_nav_num: true
toc: true
date: 2017-07-07 06:51:21
categories:
- cn
tags:
- cn
- cn-programming
thumbnail: https://steemitimages.com/DQmdtwnEARvTAohJM1rnV8GzYew2R2er5dFv9VWFrtC5vFS/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


![](https://steemitimages.com/DQmdtwnEARvTAohJM1rnV8GzYew2R2er5dFv9VWFrtC5vFS/image.png)
æ˜¨å¤©å‘äº†ä¸ªå¸–å­
* [OMG, æ”¶ç›Šåˆ†äº«ï¼Œå¯æ€•çš„åŠŸèƒ½ï¼Œæè¿·ç³Šäº†](https://steemit.com/cn/@oflyhigh/omg)

è®²äº†å¯¹å¸–å­ä½¿ç”¨æ”¶ç›Šåˆ†äº«åŠŸèƒ½å‘å¥–åé‡‘é¢çš„ä¸€äº›ç–‘é—®ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š
* æ”¶ç›Šåˆ†äº«ï¼Œåˆ†äº«çš„æ˜¯å»é™¤ç‚¹èµè€…æ”¶ç›Šåä½œè€…å®é™…æ”¶ç›Šçš„ç™¾åˆ†æ¯”å—ï¼Ÿ
* æ”¶ç›Šåˆ†äº«çš„SPæ ¸ç®—ä»·æ ¼ï¼Œæ˜¯current_median_history_price è¿˜æ˜¯å¸‚åœºä»·æ ¼ï¼Ÿ

# æ”¶ç›Šåˆ†äº«åŠŸèƒ½æ²¡é—®é¢˜

ç„¶åç»è¿‡ä¸“å®¶çº§äººç‰©è€å¿ƒç»†è‡´çš„æŒ‡ç‚¹ï¼Œå¤§è‡´ææ˜ç™½äº†è¿™ä¸ªé—®é¢˜

å…¶æ ¸å¿ƒå°±æ˜¯ï¼š ***æˆ‘çœ‹åˆ°çš„å¸–å­é‡‘é¢ï¼Œæ˜¯æ”¶ç›Šåˆ†äº«çš„å‰©ä½™é‡‘é¢***


æ‰€ä»¥ï¼Œå°±æˆ‘çš„é‚£ä¸ªå¸–å­è€Œè¨€ï¼š
* åˆ†ç»™å—ç›Šè€…(Beneficiaries)ï¼š`3.504 * 5 =  17.52 å äº†25% (5%*5)`
* åˆ†ç»™ä½œè€…(Author)ï¼š `3.504*15 = 52.56  å 75% (100%-25% = 75%)` 
åˆ†ä¸¤éƒ¨åˆ†å‘æ”¾ï¼Œ `SP 26.28 , SBD 43.177`
* åˆ†ç»™ç‚¹èµè€…(Curators): $20.64

ä¸€åˆ‡æ²¡æ¯›ç—…ï¼Œå¦‚æœä¸€å®šè¦æ‰¾å‡ºæ¯›ç—…ï¼Œé‚£å°±æ˜¯steemit UIä¸Šå°‘æ˜¾ç¤ºäº†ä¸€éƒ¨åˆ†å†…å®¹ï¼Œæ€»å¥–åŠ±åº”è¯¥åŒ…å«ï¼š
* ç‚¹èµè€… / Curators 
* å—ç›Šäºº / Beneficiaries
* ä½œè€… / Curators

è€ŒSTEEMIT UIä¸Šåªæ˜¾ç¤ºäº†ä¸¤é¡¹ï¼Œé€ æˆæˆ‘å·¨å¤§çš„è¯¯è§£ï¼Œä¹Ÿè€½è¯¯äº†ä¸“å®¶å¤§é‡æ—¶é—´ã€‚ğŸ˜¡

# ä»ä»£ç ä¸ŠéªŒè¯è¿™ä¸ªé—®é¢˜

å°½ç®¡ä¸“å®¶å·²ç»å¸®æˆ‘æ‰¾å‡ºäº†é—®é¢˜æ‰€åœ¨
ä½†æ˜¯ä»Šå¤©è¿˜æ˜¯ç²—ç•¥æµè§ˆäº†ä¸€ä¸‹ä»£ç ï¼Œçœ‹çœ‹æ˜¯å¦çœŸçš„å¦‚æ­¤

ä»£ç çœŸçš„å¥½å¤æ‚ï¼Œåè¡€
å‘å¥–ä»£ç åœ¨`process_comment_cashout()`è¿™ä¸ªå‡½æ•°
å¤§è‡´å°±æ˜¯åšä¸€äº›å‡†å¤‡å’Œåˆ¤æ–­å·¥ä½œï¼Œç„¶åéå†æ¯ä¸ª`Comment`è°ƒç”¨ï¼š 
`auto reward = cashout_comment_helper( ctx, comment );`
æ‰€ä»¥è¿™ä¸ªå°±æ˜¯ä¸ºå¸–å­å‘å¥–çš„ä»£ç å•¦ï¼š `cashout_comment_helper()`

å…¶ä¸­æˆ‘ä»¬éœ€è¦çŸ¥é“æ˜¯ï¼Œcomment.net_rshares å†³å®šä½ çš„å¸–å­æœ‰å¤šå°‘é’±ã€‚
é™¤å»ä¸€äº›è®¾ç½®å’Œåˆå§‹åŒ–ä¹‹ç±»çš„ï¼š
```
const share_type reward = util::get_rshare_reward( ctx );
uint128_t reward_tokens = uint128_t( reward.value );
```
è¿™ä¸ªå°±æ˜¯å¸–å­çš„***æ€»æ”¶ç›Š/ä»£å¸tokens***äº†

```
share_type curation_tokens = ( ( reward_tokens * get_curation_rewards_percent( comment ) ) / STEEMIT_100_PERCENT ).to_uint64();
share_type author_tokens = reward_tokens.to_uint64() - curation_tokens;
```
ä»£å¸åˆ†ä¸ºä½œè€…çš„ä»¥åŠç‚¹èµè€…çš„ï¼ŒæŒ‰æ¯”ä¾‹åˆ†é…

```
author_tokens += pay_curators( comment, curation_tokens );
```
å‘æ”¾ç‚¹èµè€…ä»£å¸ï¼Œä½†æ˜¯å‘¢ï¼Œå› ä¸ºæœ‰äº›æœ‰æ—©é¸Ÿæƒ©ç½šï¼Œæ‰€ä»¥ä¼šå‰©ä¸€äº›ï¼Œç»Ÿç»Ÿå¥–åŠ±ç»™ä½œè€…

```
            for( auto& b : comment.beneficiaries )
            {
               auto benefactor_tokens = ( author_tokens * b.weight ) / STEEMIT_100_PERCENT;
               auto vest_created = create_vesting( get_account( b.account ), benefactor_tokens, has_hardfork( STEEMIT_HARDFORK_0_17__659 ) );
               push_virtual_operation( comment_benefactor_reward_operation( b.account, comment.author, to_string( comment.permlink ), vest_created ) );
               total_beneficiary += benefactor_tokens;
}
```
è¿™éƒ¨åˆ†å°±æ˜¯ç»™å—ç›Šäººå‘æ”¾å¥–åŠ±å•¦
ç”±æ­¤å¯è§ï¼Œå®ƒæ˜¯***ä»¥åˆ¨é™¤ç‚¹èµè€…æ”¶ç›Šä»¥åçš„ä½œè€…æ€»æ”¶ç›Šä¸ºåŸºç¡€æŒ‰æ¯”ä¾‹å‘æ”¾ã€‚***

```
            author_tokens -= total_beneficiary;

            auto sbd_steem     = ( author_tokens * comment.percent_steem_dollars ) / ( 2 * STEEMIT_100_PERCENT ) ;
            auto vesting_steem = author_tokens - sbd_steem;

            const auto& author = get_account( comment.author );
            auto vest_created = create_vesting( author, vesting_steem, has_hardfork( STEEMIT_HARDFORK_0_17__659 ) );
            auto sbd_payout = create_sbd( author, sbd_steem, has_hardfork( STEEMIT_HARDFORK_0_17__659 ) );
```
æœ€ç»ˆç»™ä½œè€…çš„æ”¶ç›Šï¼ˆå‡æ‰äº†å—ç›Šäººéƒ¨åˆ†ï¼‰ï¼Œæ ¹æ®è®¾ç½®ï¼ŒæŒ‰æ¯”ä¾‹å‘æ”¾

é€šè¿‡è¿™éƒ¨åˆ†ä»£ç ï¼Œæˆ‘ä»¬å¾—çŸ¥ï¼š
* å¸–å­çš„æ”¶ç›Šï¼Œé™¤å»å…¶å®ƒä¸€äº›å› ç´ ï¼Œç”±***comment.net_rshares***å†³å®š
* get_rshare_reward æ ¹æ®ç³»ç»Ÿå› ç´ ä»¥åŠcommentè®¾ç½®(æ‹’ç»æ”¶ç›Šï¼Œæœ€å¤§æ”¶ç›Šç­‰)è®¡ç®—å¸–å­***æ€»åº”å¾—ä»£å¸***
* æ€»åº”å¾—ä»£å¸æŒ‰æ¯”ä¾‹åˆ†æˆ***ä½œè€…***ä»¥åŠ***ç‚¹èµè€…ä»£å¸***
* ç‚¹èµè€…ä»£å¸å‘æ”¾çš„å‰©ä½™éƒ¨åˆ†***(æ—©é¸Ÿæƒ©ç½š)ï¼Œå¢åŠ ç»™ä½œè€…***
* ä½œè€…æ€»åº”å¾—ä»£å¸(ä½œè€…éƒ¨åˆ†+æ—©å¹´æƒ©ç½šå‰©ä½™éƒ¨åˆ†)***æŒ‰æ¯”ä¾‹åˆ†ç»™å—ç›Šè€…(Beneficiaries)***
* åˆ†ç»™å—ç›Šäººä»¥åçš„***å‰©ä½™éƒ¨åˆ†***ï¼ŒæŒ‰ç…§è®¾ç½®å‘æ”¾ç»™ä½œè€…

å†å›å¤´çœ‹æˆ‘åœ¨ä¸“å®¶æŒ‡ç‚¹ä¸‹å¯¹å¸–å­æ”¶ç›Šåˆ†äº«åŠŸèƒ½çš„ç†è§£ï¼Œæ²¡æ¯›ç—…ã€‚

å¦å¤–ï¼Œç»è¿‡åˆ†æï¼Œæˆ‘ä»¬å›å¤´çœ‹æ˜¨å¤©æå‡ºçš„é—®é¢˜ï¼Œç­”æ¡ˆå·²ç»ä¸è¨€è€Œå–»äº†ã€‚


# STEEM ä»¥åŠ STEEM UI éœ€è¦æ”¹è¿›çš„åœ°æ–¹

STEEMåœ¨è®¡ç®—å’Œå‘æ”¾å¥–åŠ±åï¼Œä¼šå¯¹å¸–å­æ‰§è¡Œä¸€äº›æ›´æ–°æ“ä½œï¼Œæ¯”å¦‚åŠ ä¸Šå‘å¥–æ—¶é—´ï¼Œä»¥åŠåˆ†ç»™ç‚¹èµè€…å’Œä½œè€…çš„å®é™…æ”¶ç›Šç­‰ç­‰ã€‚ä½†æ˜¯å´***æ²¡æœ‰åŠ ä¸Šç»™å—ç›Šäººçš„æ”¶ç›Šè¿™ä¸€ä¿¡æ¯***

è€ŒSTEEMIT UIä¸Šï¼Œæ›´æ˜¯åªæ˜¾ç¤ºäº† 
* ä½œè€…/Authoræ”¶ç›Š
* ç‚¹èµè€… / Curators æ”¶ç›Š

å¹¶ä¸”ç²—æš´çš„æŠŠè¿™ä¸¤é¡¹åŠ åˆ°ä¸€èµ·ï¼Œæ˜¾ç¤ºä¸ºå¸–å­æ”¶ç›Š(æ€»å¥–åŠ±)
è¿™èƒ½ä¸è®©äººè¯¯ä¼šå˜›ï¼Œå®³æˆ‘æ‹¿å°ç®—è‰æœ¬è®¡ç®—åŠå¤©ğŸ˜¡

æ‰€ä»¥å»ºè®®å¦‚ä¸‹ï¼š
* é“¾ä¸Šå¯¹ç»“ç®—åçš„Comment åŠ ä¸Š 
***beneficiaries_payout_value***

* UIä¸Šå¯¹ç»“ç®—çš„å¸–å­ï¼ŒåŠ ä¸Š
***å—ç›Šäºº / Beneficiaries æ”¶ç›Š***

é¡ºä¾¿è¡¥å……ä¸€ä¸ªæœ€é‡è¦çš„ç»“è®ºï¼š ***æ”¶ç›Šåˆ†äº«åŠŸèƒ½ä¸ä¼šå€’æ­é’±çš„ğŸ˜­***

----
æ„Ÿè°¢é˜…è¯» / Thank you for reading.
æ¬¢è¿upvoteã€resteemä»¥åŠ following me @oflyhigh ğŸ˜

- - -

This page is synchronized from the post: [å…³äºæ”¶ç›Šåˆ†äº«åŠŸèƒ½ç†è§£çš„ç»ˆæç‰ˆ(ä¸“å®¶æŒ‡ç‚¹ & ä»£ç æ ¸è¯)](https://steemit.com/@oflyhigh/and)
