
---
title: 'å°è‘µèŠ±è¯¾å ‚å¼€è¯¾äº†ï¼šæ¥èŠèŠå¾®ä¿¡è¯­éŸ³æ§åˆ¶å®¶ç”µ / Using WeChat voice control appliances'
permlink: using-wechat-voice-control-appliances
catalog: true
toc_nav_num: true
toc: true
date: 2017-06-26 05:26:54
categories:
- cn-diy
tags:
- cn-diy
- cn
- iot
- wechat
- esp8266
thumbnail: https://steemitimages.com/DQmP5vdhC9nxQig83AqoHQRjEsRnNDeMZ5dYPkCECJFLXpq/IMG_20170626_122324.jpg
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


å¤©å¤©èŠsteemitçš„ç›¸å…³æŠ€æœ¯ï¼Œæœ‰ç‚¹ç–²åŠ³ï¼Œæ¢ä¸ªè¯é¢˜ï¼Œè½»æ¾ä¸€ä¸‹ã€‚
ä¹‹å‰åœ¨å…¶å®ƒæœ‹å‹çš„å›å¤ä¸‹æåŠä»¥å‰ç”¨ESP8266å’Œå¾®ä¿¡è¿æ¥è¿›è¡Œå®¶ç”µæ§åˆ¶çš„äº‹ï¼Œå›æƒ³é‚£æ—¶å€™ç©å¾—æ˜¯ä¸äº¦ä¹ä¹å•Šï¼Œä»ç‚¹äº®ä¸€ä¸ªå°ç¯åˆ°æ§åˆ¶ç»§ç”µå™¨ä»¥åŠèˆµæœºåŠ¨ä½œåˆ°èƒ½å¤Ÿåšå‡ºæœ‰ä¸€ä¸ç‚¹ä»·å€¼çš„ä¸œè¥¿ï¼Œç´¯å¹¶å¿«ä¹ç€ã€‚ä»Šå¤©éšä¾¿åˆ†äº«ä¸€ä¸‹å¾®ä¿¡è¯­éŸ³æ§åˆ¶å®¶ç”µçš„å¤§è‡´æµç¨‹ä»¥åŠç›¸å…³æŠ€æœ¯ï¼Œä¸æ¶‰åŠä»£ç ï¼Œä¹Ÿæ²¡æœ‰æˆå“çš„ç¤ºä¾‹ï¼Œå› ä¸ºä»¥å‰åšçš„ä¸œè¥¿ç©è¿‡ä¹‹åéƒ½ä¸çŸ¥é“è¢«æˆ‘åˆ·æˆä»€ä¹ˆå†…å®¹å•¦ã€‚

è¨€å½’æ­£ä¼ ï¼Œç“œå­ã€é¥®æ–™ã€çˆ†ç±³èŠ±å‡†å¤‡å¥½ï¼Œå¼€å§‹è®²è¯¾å•¦ã€‚

# å…³äºAirkissç­‰ç­‰
å…¶å®å¾®ä¿¡å¯¹IOTæä¾›äº†å¾ˆå¤šæŠ€æœ¯æ”¯æŒå’Œå¼€å‘å·¥å…·ï¼Œæ¯”å¦‚airkisså•¥çš„
ä¸åƒä»¥å¾€è®¾ç½®ç‚¹å•¥ï¼Œéƒ½è¦å…ˆç”¨ç”µè„‘ç½‘çº¿è¿æ¥->è®¾ç½®ç”µè„‘IPæ®µ->è®¿é—®æŒ‡å®šIP->è¿›è¡Œè®¾ç½®
ç°åœ¨æ‰‹æœºå•¥çš„ç›´æ¥è¿ä¸Šè®¾å¤‡ã€ç„¶åè¾“å…¥å®¶é‡ŒWIFIå¯†ç ï¼Œä¸€åˆ‡æå®šã€‚
ç¥å¥‡ä¹‹å¤„å°±åœ¨äºæ²¡è¾“å…¥å¯†ç ï¼Œå’‹å°±é€šè¿‡WIFIè¿ä¸Šè®¾å¤‡äº†å‘¢ï¼Ÿ

è¿™å°±æ˜¯å¾®ä¿¡çš„airkissï¼Œåœ¨å…¶å®ƒå‚å•†æœ‰çš„å«åšSmartconfigï¼Œè¿˜æœ‰å«åšSmartConnectï¼Œè¿˜æœ‰å«åšWIFIå¿«è¿ï¼Œæœ¬è´¨éƒ½å·®ä¸å¤šï¼Œå…¶å®æ ¸å¿ƒæŠ€æœ¯å°±æ˜¯ï¼š
* æ‰‹æœºå‘é€å¹¿æ’­UDPæ•°æ®åŒ…
* è®¾å¤‡æ‰«ææ‰€æœ‰çš„å¯ç”¨çƒ­ç‚¹ï¼Œå¤„äºæ··æ‚æ¨¡å¼ï¼ˆç›‘å¬æ¨¡å¼ï¼Œæ­¤æ¨¡å¼ä¸‹å¯ä»¥æ”¶åˆ°å¹¿æ’­UDPåŒ…ï¼‰
* è®¾å¤‡åœ¨æ­£ç¡®çš„çƒ­ç‚¹ä¸Šæ¥æ”¶åˆ°å¯†ç ï¼ˆå¹¿æ’­UDPæ•°æ®åŒ…ï¼‰
* è®¾å¤‡è¿å…¥ç½‘ç»œæˆåŠŸ


å…¶ä¸­UDPå¦‚ä½•å‘é€å¯†ç ç›¸å¯¹æ¯”è¾ƒå¤æ‚
å¤§æ¦‚æ„æ€å°±æ˜¯ä¸¤è€…æ— æ³•é€šè¿‡UDPåŒ…çš„å†…å®¹æ¥äº¤æ¢æ•°æ®ï¼ˆå› ä¸ºè¿˜æœªå»ºç«‹èµ·æ¥è¿æ¥ï¼Ÿï¼‰ä½†æ˜¯å¯ä»¥è·å–æ•°æ®åŒ…çš„é•¿åº¦ç„¶åå‘¢ï¼Œèªæ˜çš„äººç±»å°±åœ¨é•¿åº¦ä¸Šåšæ–‡ç« äº†ï¼Œæ¯”å¦‚é•¿åº¦1000ä¸ªå­—èŠ‚ä»£è¡¨1ï¼Œ1001ä¸ªå­—èŠ‚ä»£è¡¨2...è¿™æ ·å°±å¯ä»¥é€šè¿‡ä¸åŒçš„é•¿åº¦å¯¹å†…å®¹è¿›è¡Œç¼–ç 

(å…³äºAirkissçš„ç†è§£ç›´æ¥å¼•ç”¨æˆ‘ä»¥å‰åœ¨å…¶å®ƒç½‘ç«™å‘è¡¨çš„éƒ¨åˆ†å†…å®¹ï¼‰
æ—¢ç„¶Airkissè¿™ä¹ˆé«˜å¤§ä¸Šï¼Œå’±ä¹Ÿç”¨å‘—ï¼Œå¯¹ä¸èµ·ï¼Œæˆ‘ä¹‹å‰çš„è®¾å¤‡ç”¨æ²¡ç”¨è¿™éƒ¨åˆ†å†…å®¹ï¼Œå› ä¸ºè¿™è¦ç”³è¯·æˆä¸ºå¾®ä¿¡çš„è®¾å¤‡åˆä½œå•†ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”å’±å°±ç©ç©ï¼Œç›´æ¥æŠŠWIFI IDå’Œå¯†ç å†™æ­»åœ¨ç¨‹åºé‡Œå¤šç®€å•ã€‚è¯´äº†è¿™ä¹ˆå¤šï¼Œå°±æ˜¯æƒ³è®©å¤§å®¶å¤šäº†è§£äº›æŠ€æœ¯èƒŒæ™¯ï¼Œä¸‡ä¸€å•¥æ—¶å€™ç”¨åˆ°äº†å‘¢ã€‚

# ä¸ºå•¥ç”¨å¾®ä¿¡

å…¶å®ç”¨å•¥éƒ½ä¸€æ ·çš„ï¼Œæ¯”å¦‚ç”¨å‘½ä»¤è¡Œå¼€å…³ç¯ã€æˆ–è€…ç½‘é¡µå¼€å…³ç¯ã€æˆ–è€…å†™ä¸ªAPPå¼€å…³ç¯ï¼Œéƒ½å·®ä¸å¤šäº†ï¼Œä¹‹æ‰€ä»¥é€‰æ‹©å¾®ä¿¡ï¼Œæ˜¯å› ä¸ºæ‰‹æœºéšæ—¶åœ¨èº«è¾¹ã€åˆä¸ç”¨å†™é¢å¤–çš„åº”ç”¨ã€ä¹Ÿä¸ç”¨è£…é¢å¤–çš„è½¯ä»¶ã€‚

å¾®ä¿¡å¯ä»¥ä½¿ç”¨æ³¨å†Œå¾®ä¿¡IDï¼ŒåŠ å¥½å‹ï¼Œç„¶åé€šè¿‡ç±»ä¼¼å¾®ä¿¡æœºå™¨äººï¼ˆè°ƒç”¨ç½‘é¡µç‰ˆAPI)çš„æ–¹å¼é€šä¿¡ï¼Œå¼Šç«¯æ˜¯æ³¨å†ŒIDæ¯”è¾ƒéº»çƒ¦ï¼Œç½‘é¡µç‰ˆAPIå¹¶éå®˜æ–¹æä¾›ï¼Œè€Œä¸”çˆ±å¥½è€…æŠ“åŒ…åˆ†æå‡ºæ¥çš„ï¼Œå¹¶ä¸æ˜¯ååˆ†ç¨³å®šï¼Œå¹¶ä¸”è¦æœºå™¨äººå¥½ä¿æŒæŒ‚æœºã€‚

è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯ç”¨å¾®ä¿¡å…¬ä¼—å·ï¼Œé¢ï¼Œæˆ‘è®°ä¸æ¸…è®¢é˜…å·æ˜¯å¦æœ‰ç›¸å…³åŠŸèƒ½äº†ï¼Œä½†æ˜¯ä¼ä¸šå·å’ŒæœåŠ¡å·ä¸€å®šå¯ä»¥ã€‚ä½ è¯´ä¼ä¸šå·éš¾æ³¨å†Œï¼Œæœ‰ç§åŠŸèƒ½å«æµ‹è¯•å·ï¼Œç”¨èµ·æ¥è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œè¶³çŸ£ã€‚


# å¤§è‡´æµç¨‹

* å‘å¾®ä¿¡å…¬å…±å·å‘é€æ§åˆ¶ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡æœ¬çš„`å¼€ç¯`ã€`å…³ç¯`ç­‰ï¼Œæˆ–è€…è¯­éŸ³ä¿¡æ¯
* å…¬ä¼—å·ä¿¡æ¯ä¼šä¼ é€’ç»™è®¾ç½®çš„APIè°ƒç”¨ç¨‹åº(ç½‘ç«™ä¸Šçš„è„šæœ¬)
* è„šæœ¬ä¸­è¯†åˆ«å‡ºæ§åˆ¶ä¿¡æ¯ï¼Œå¯¹äºè¯­éŸ³ä¿¡æ¯ï¼Œå¾®ä¿¡æä¾›è¯­éŸ³è¯†åˆ«å¼•æ“
* è„šæœ¬å°†æ§åˆ¶ä¿¡æ¯æ¨é€è‡³MQTTä»£ç†
* æ§åˆ¶è®¾å¤‡æ¥å—MQTTä»£ç†æ¨é€çš„æ§åˆ¶ä¿¡æ¯
* æ§åˆ¶è®¾å¤‡æ ¹æ®å¯¹åº”çš„æ§åˆ¶ä¿¡æ¯ï¼Œæ§åˆ¶ç»§ç”µå™¨å®ç°å¼€å…³ç¯æ“ä½œ

# éœ€è¦çš„è®¾å¤‡

* MQTTä»£ç†
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯MQTTæŠ€æœ¯ï¼Œå½“ç„¶è¿˜å¯ä»¥ç”¨å…¶å®ƒå¥½å¤šç‰©è”ç½‘é€šä¿¡åè®®/æœºåˆ¶
ä½†æ˜¯MQTTç®€å•å•Š
MQTTä»£ç†ç½‘ä¸Šå¾ˆå¤šï¼Œè‡ªå·±æ­å»ºä¸€ä¸ªä¹Ÿä¸æ˜¯å¾ˆéº»çƒ¦

* è¿è¡Œç½‘ç«™è„šæœ¬çš„ç½‘ç«™æœåŠ¡å™¨
å› ä¸ºå¾®ä¿¡å…¬ä¼—å·è¦è°ƒç”¨ç½‘ç«™ä¸Šçš„è„šæœ¬ï¼Œæ‰€ä»¥éœ€è¦ä½ æœ‰ä¸ªæ‰˜ç®¡ç½‘ç«™è„šæœ¬çš„åœ°æ–¹ï¼Œæ¯”å¦‚è¯´è™šæ‹Ÿä¸»æœºã€ç‹¬ç«‹æœåŠ¡å™¨ä¹‹ç±»çš„

* æ§åˆ¶è®¾å¤‡
å…¶å®è¿˜å¯ä»¥å«åšMQTT å®¢æˆ·ç«¯
ç”¨æ¥æ¥æ”¶MQTTä»£ç†æ¨é€çš„è®¢é˜…ä¿¡æ¯ï¼Œå¹¶æ ¹æ®ä¿¡æ¯è¿›è¡Œæ“ä½œ

* æ‰§è¡Œè®¾å¤‡
è¿™ä¸ªå°±ç®€å•å•¦ï¼Œç»§ç”µå™¨ä¸€æšï¼Œå°ç¯å•¥çš„æ˜¯å¾…æ§è®¾å¤‡


# ESP8266

ESP8266æ˜¯è¿‘å¹´æµè¡Œèµ·æ¥çš„å¸¦æ— çº¿è¿æ¥çš„å•ç‰‡æœºè®¾å¤‡/æ¨¡å—
ä»¥å¾€å¤§å®¶éƒ½æ˜¯ç”¨W5100æˆ–è€…ENC28J60ç­‰æœ‰çº¿è¿æ¥è®¾å¤‡ï¼Œæ— çº¿è®¾å¤‡è¦ä¹ˆè´µçš„è¦æ­»ï¼Œè¦ä¹ˆæå…¶éš¾ç”¨ï¼ŒESP8266å·²ç»é—®ä¸–å°±æ”¹å˜äº†è¿™ç§æƒ…å†µï¼Œå¹¶è·å¾—çš„æå¤§çš„æµè¡Œä¸æˆåŠŸã€‚

ESP8266çš„å„ç§æ¨¡å—/æ¿å¡æ•°ä¸èƒœæ•°ï¼Œé€‚åˆä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚æˆ‘æ‰‹å¤´æœ‰ä¸‰ç§ä»¥ä¸Šï¼Œä¸‹è¾¹ç§€ä¸€ä¸‹ï¼ˆæœ‰ç‚¹è„ï¼Œè§è°…ï¼‰

![IMG_20170626_122324.jpg](https://steemitimages.com/DQmP5vdhC9nxQig83AqoHQRjEsRnNDeMZ5dYPkCECJFLXpq/IMG_20170626_122324.jpg)
å¼€å‘å¿«, ä½¿ç”¨çš„æ˜¯ESP8266-12F/E, é›†æˆäº†æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ã€OLEDæ¶²æ™¶å±ã€RGB LEDã€çº¢å¤–æ¥æ”¶å™¨ã€æ°”å‹ä¼ æ„Ÿå™¨ç­‰ç­‰ç­‰

----

![IMG_20170626_121206.jpg](https://steemitimages.com/DQme5myC1Xr7w2xAwJi7HBvJJEDPkVjJETjQy1q957PSy5Z/IMG_20170626_121206.jpg)
ESP8266-12F/Eçš„ç®€åŒ–åº”ç”¨å°æ¿

----

![IMG_20170626_121233.jpg](https://steemitimages.com/DQmcgeWPBaAEfTp3ptWssQmz9cuRnLuNniDFKE5nYmUNSCA/IMG_20170626_121233.jpg)
ESP8266-01 

----

å½“ç„¶ï¼Œé™¤äº†ESP8266ä½ è¿˜å¯ä»¥ç”¨å„ç§å…¶å®ƒè®¾å¤‡ï¼Œä¸è¿‡æˆ‘ä¸ä¼šå·æ‘¸å‘Šè¯‰ä½ ESP8266æœ€å»‰ä»·çš„äº‹å®ï¼Œä¸Šä¸€å¥—æˆ‘ç©Intel çˆ±è¿ªç”Ÿæ—¶å¼„çš„è‡ªåŠ¨æµ‡èŠ±ç³»ç»Ÿæ¨¡å‹ï¼Œè¿™å¥—è®¾å¤‡å…¨ä¸‹æ¥1000å¤šå¤§æ´‹ï¼Œç”¨æ¥æµ‡èŠ±æˆ–è€…å¼€ç¯ï¼Ÿé‚£å¾—å¤šè´µçš„èŠ±å’Œç¯å•Šã€‚
![IMG_20160909_084922.jpg](https://steemitimages.com/DQmRc8Fwr493xANZtBP5Dhk4YnsSFtUVbFxzLXeDwAaVVTU/IMG_20160909_084922.jpg)


# MQTT æœåŠ¡å™¨

è™½ç„¶ç½‘ä¸Šæœ‰ä¸€äº›æä¾›æœåŠ¡çš„MQTTæœåŠ¡å™¨ï¼Œä½†æ˜¯è‡ªå·±æ­å»ºä¹Ÿæ˜¯å¾ˆæœ‰ä¹è¶£çš„äº‹æƒ…ä¸æ˜¯ï¼Œæ„Ÿå…´è¶£çš„çœ‹è¿™é‡Œï¼Œæˆ‘è®°ä¸æ¸…æ¥šæˆ‘æ˜¯å¦åœ¨steemitä¸Šå…±äº«è¿‡æ­å»ºMQTTæœåŠ¡å™¨çš„å†…å®¹äº†ï¼Œæ€»ä¹‹ï¼Œå¾ˆç®€å•å°±æ˜¯äº†ã€‚

>Eclipse Mosquittoâ„¢ is an open source (EPL/EDL licensed) message broker that implements the MQTT protocol versions 3.1 and 3.1.1. MQTT provides a lightweight method of carrying out messaging using a publish/subscribe model. This makes it suitable for "Internet of Things" messaging such as with low power sensors or mobile devices such as phones, embedded computers or microcontrollers like the Arduino.

# ç½‘ç«™æœåŠ¡å™¨

å…¶å®ç½‘ç«™æœåŠ¡å™¨å’Œç‹¬ç«‹ä¸»æœºå•¥çš„æˆ‘æœ‰ä¸€å¤§å †å•¦ï¼Œä½†æ˜¯ä¸ºäº†ç©ï¼Œè¿˜æ˜¯è‡ªå·±æœ¬åœ°å¼„äº†ä¸€ä¸ªï¼Œå’ŒMQTTæœåŠ¡å™¨éƒ½æ­å»ºåœ¨ä¸€èµ·ï¼Œå¾ˆæ–¹ä¾¿çš„ï¼Œç„¶åç”¨DDNSä»¥åŠè®¾ç½®NATè®©å¤–ç½‘å¯ä»¥è®¿é—®åˆ°æœåŠ¡ï¼Œå°±å¯ä»¥å•¦ã€‚

ä½¿ç”¨é¦™è•‰æ´¾/æ ‘è“æ´¾ä¹‹ç±»çš„æ­å»ºHTTPæœåŠ¡å™¨ï¼Œè¿™ä¸ªæˆ‘ä¸€å®šå…±äº«è¿‡ï¼Œæ„Ÿå…´è¶£çš„å»æˆ‘ä¸»é¡µæŸ¥æ‰¾å§ã€‚

![IMG_20170626_121333.jpg](https://steemitimages.com/DQmNuSiALGzbbwiodN3MFjQnvVd67rm3Y14geTEd84BRJBS/IMG_20170626_121333.jpg)

æˆ‘ç”¨æ¥æ­å»ºHTTPæœåŠ¡å™¨ä»¥åŠMQTTæœåŠ¡å™¨çš„é¦™è•‰æ´¾M2+, å°å·§å¯çˆ±ï¼Œæ€§èƒ½å¼ºå¤§ã€‚

----

å¥½äº†ï¼Œå°±èŠè¿™ä¹ˆå¤šå¤§ï¼Œå¤§è‡´æ€è·¯å°±æ˜¯è¿™ä¸ªæ ·å­ã€‚
å…³é”®å­—
* å¾®ä¿¡å…¬ä¼—å·
* ç½‘ç«™æœåŠ¡å™¨
* MQTTæœåŠ¡å™¨
* ESP8266

å¤ªå¤šçš„ç»†èŠ‚å’Œä»£ç å°±ä¸å•°å—¦å•¦ã€‚

----
æ„Ÿè°¢é˜…è¯»
æ°´å¹³æœ‰é™ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·è®¨è®ºï¼Œå¦‚æœ‰è°¬è¯¯ï¼Œçƒ¦è¯·æŒ‡æ­£

æ¬¢è¿upvoteã€resteemä»¥åŠ following me @oflyhigh ğŸ˜
è¯·å°†æˆ‘è®¾ç½®æˆä¸ºä½ çš„è§è¯äººæŠ•ç¥¨ä»£ç†, è®¿é—® https://steemit.com/~witnesses
 ![](https://steemitimages.com/DQmQhMNaw3fXpHsDM6Jx1bNi732DySj8JQefq9jjQENcosJ/image.png)

- - -

This page is synchronized from the post: [å°è‘µèŠ±è¯¾å ‚å¼€è¯¾äº†ï¼šæ¥èŠèŠå¾®ä¿¡è¯­éŸ³æ§åˆ¶å®¶ç”µ / Using WeChat voice control appliances](https://steemit.com/@oflyhigh/using-wechat-voice-control-appliances)
