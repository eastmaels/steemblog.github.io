
---
title: '来说说帖子排名'
permlink: 5egkjd
catalog: true
toc_nav_num: true
toc: true
date: 2017-02-14 15:07:18
categories:
- cn
tags:
- cn
- cn-programming
thumbnail: 
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


编程技术区创建的那个帖子，排进全网首页
以前一直不知道回复的收益会影响帖子排名，这次算涨姿势了。

# 测试

为了验证这个事，写了一段代码
本来打算用piston的get_comments接口，但是运行的时候有BUG，出错了
大致看了一下，应该是piston中对帖子的支付状态之类的没仔细判断，导致传入无效的参数崩溃

看了一下piston的实现，使用的是get_content_replies这个API
于是在piston的底层基础上直接用这个API来调用

思路是读指定帖子的回帖（第0级）
记录每个回帖的收益`pending_payout_value`
然后读回帖的回帖（第一级）
依此递归

最后得到一个所有回复的列表
然后，打印列表，并统计总计得钱的值

以这个帖子为例：
[谈谈这里的帖子排名算法](https://steemit.com/cn-programming/@abit/12jzzk)
`total_pending_payout_value`已经到达
total_pending_payout_value: 37.069 SBD
其中所有回复pending_payout_value我加起来为36.43
或许这个total_pending_payout_value会影响帖子的排名

# 最终结论
* 文章或回复的作者收益在`pending_payout_value`
* 文章或回复中的 `total_pending_payout_value`包含文章或回复本身以及所有子回复。
* `total_pending_payout_value`或会决定帖子的排名 （或者说是决定因素之一）

以上测试和结论仅基于首次支付模式（还没发奖）
由于数据时刻再变，读出来的以后可能已经变了，所以不保证数据的准确性
以上结论供大家参考玩。

- - -

This page is synchronized from the post: [来说说帖子排名](https://steemit.com/@oflyhigh/5egkjd)
