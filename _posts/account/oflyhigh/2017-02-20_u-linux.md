
---
title: '设置和访问路由器上的共享U盘（三： Linux访问篇）'
permlink: u-linux
catalog: true
toc_nav_num: true
toc: true
date: 2017-02-20 12:12:51
categories:
- cn
tags:
- cn
- cn-programming
- how-to
- router
thumbnail: 
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


之前的相关文章

* [设置和访问路由器上的共享U盘（一： 设置篇）](https://steemit.com/cn/@oflyhigh/u)
* [设置和访问路由器上的共享U盘（二： Windows访问篇）](https://steemit.com/cn/@oflyhigh/u-windows)

其实我之所以费劲周折写这三篇文章
最最最最主要的原因，是我在Linux下访问时踩了很多很大的坑！
回头看看就是三两句话的事，但是我真的折腾了好久。

#  言归正传

`sudo mount -o username=oflyhigh,password=oflyhigh //192.168.249.1/oflyhigh /media`
以上命令，将U盘上的访问点挂载到Linux系统
其中username=oflyhigh,password=oflyhigh是我们设置的访问点的用户名密码
不同的用户名密码具有不同的权限，对应不同的访问点，这点要牢记

但是，系统挂载上之后，我缺发现当前用户没法对其进行写操作
```
mkdir bbb
mkdir: cannot create directory ‘bbb’: Permission denied
```
这点还是很麻烦的，sudo来sudo去的很闹心

找了半天，有人说可以用`setfacl`
试了一下提示：`setfacl: /media: Operation not supported`
又听人说需要重新mount
试了一下`sudo setfacl -m user:pi:rwx /media`, 可是问题依旧
有点迷糊，不研究了。

找了很久，发现mount时候可以指定gid和uid，咦这个可以试试
网上说可以用id username 的方式查询用户的uid和gid
```
id pi
uid=1000(pi) gid=1000(pi) groups=1000(pi)
```
试了一下
`sudo mount -o gid=1000,uid=1000,username=oflyhigh,password=oflyhigh //192.168.249.1/oflyhigh /media`
搞定了，然后试了一下直接用用户名
`sudo mount -o gid=pi,uid=pi,username=oflyhigh,password=oflyhigh //192.168.249.1/oflyhigh /media`
居然一样的，我觉得我有点方。

# 结论

好了，就这样了
什么fstab之类就不去弄了
反正弄一次忘一次
至少，现在我使用需求已经完全满足了。

此篇为终结篇，不要期待MAC和IOS和安卓啥的啦
我太累了，想静静了(别问我静静是谁)

- - -

This page is synchronized from the post: [设置和访问路由器上的共享U盘（三： Linux访问篇）](https://steemit.com/@oflyhigh/u-linux)
