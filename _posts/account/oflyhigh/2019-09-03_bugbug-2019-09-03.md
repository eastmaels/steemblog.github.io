
---
title: 'BUG之又见BUG，主备节点均已恢复上线'
permlink: bugbug-2019-09-03
catalog: true
toc_nav_num: true
toc: true
position: 9999
date: 2019-09-03 08:28:57
categories:
- cn
tags:
- cn
- bug
- steemd
- witness
- busy
thumbnail: 'https://cdn.steemitimages.com/DQmbqn5MfckipJxn3mshfDUqajGzbEUbr8hhbGDCozpGiqC/image.png'
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---



前晚有事情忙了几乎一整夜，早晨睡了不到一个半小时，醒来后就看到@justyy 在群里说steem链又停止前进了。

大概在昨天上午9:16前后，steemit的官方github上推出了补丁程序：
>https://github.com/steemit/steem/commits/20190901-fix-curation-weight

不过遗憾的是，这次不是仅仅替换steemd程序就可以解决的，需要replay。

于是又开始编译：
>![](https://cdn.steemitimages.com/DQmbqn5MfckipJxn3mshfDUqajGzbEUbr8hhbGDCozpGiqC/image.png)

这次不是硬分叉，所以版本号依旧是0.22.0，也许回头steemd会把补丁作为新版本v0.22.1发布，但是程序其实是一样的。

>启动打了补丁后的steemd应用：
![](https://cdn.steemitimages.com/DQmSHQjdJDHsnVdecXQMGi9mGEgDZtydo9F15vKrdP9oxLN/image.png)

>然后是漫长的Replay.
![](https://cdn.steemitimages.com/DQmTe3uAWueCFkatHW5AREBfnWPuLMKbHLQcG9xSgEZa5mP/image.png)

可惜我手欠又重启了steemd，搞了一下测试，以为能加速replay进程，结果毛线效果都没有，还白白浪费了之前replay的内容。

终于看到HF21/HF22了，见到了曙光
>![](https://cdn.steemitimages.com/DQmTn22B8BNZPqYHCDRar7WzCMfgpdUSY3t4T6QJofDa1b6/image.png)

耗时7.89小时后总算完成了。
>3281588ms database.cpp:339              reindex              ] Done reindexing, elapsed time: `28406.83747999999832246 sec`

第二台机器（备份节点）快了好多，只用了4.89小时
>![](https://cdn.steemitimages.com/DQmVYQ2VU7QbMj3RD56YcNsFWHWWbtsvJH2aNXcbv1eM45A/image.png)

看来更高速度的CPU还是有所帮助的，下次有经验了，不过还是希望这样下次越少越好。

# 补充：
令人尴尬的是，许多第三方API都恢复了，而steemit官方的API(`api.steemit.com`)依然是坏掉的，不知道何时能够修复。

----
<center><strong>Vote For Me As Witness</strong>
https://steemit.com/~witnesses type in **`oflyhigh`** and click ***`VOTE`***
[![](https://cdn.steemitimages.com/DQmX5NysqT44FBa3bhuWqQ69nAbseu8Nt5YQPn2pYejPVxA/image.png)](https://steemit.com/~witnesses)
[Vote @oflyhigh via Steemconnect](https://steemconnect.com/sign/account-witness-vote?witness=oflyhigh&approve=1)
<strong>Thank you!</strong></center>


- - -

This page is synchronized from the post: ['BUG之又见BUG，主备节点均已恢复上线'](https://steemit.com/@oflyhigh/bugbug-2019-09-03)
