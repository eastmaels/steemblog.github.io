
---
title: "借问师友何处有，门童遥指新手村 | 关于 @cn-hello 小友的来历"
permlink: cn-hello-oqz3cshda1
catalog: true
toc_nav_num: true
toc: true
date: 2019-05-16 18:58:39
categories:
- steempress
tags:
- steempress
- cn-stem
- cn
- cn-hello
- cnstm
thumbnail: https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LXMinqg0EHzgN2ivoTT%2F-Lf-f1i85bMsA7gkxS9Q%2F-Lf-i8DUvz8y8-_lmONJ%2Fimage.png?alt=media&token=b8277e7c-732a-4d74-8c26-715640365d7b
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


<p>最近，CN区多了一位叫 @cn-hello 的小朋友，自称是<strong>CN区的小门童</strong>，每天在CN区路口守望，看到新人便上去提供一些建议，比如：“少侠，我看你<a href="https://steemd.com/@cn-hello" target="_blank" rel="noreferrer noopener">能量</a>很少了啊，休息会来村里喝杯茶坐坐吧” ，“那个谁，请你不要抄别人文章啊，会<a href="http://steemcleaners.com/" target="_blank" rel="noreferrer noopener">被举报</a>的啊”，......，顺便给新人点个小小的赞。‌</p>
<p>随后又开始忽悠新人：“少年，我看你骨骼清奇，这本<a href="https://steem-guides.github.io/steemh" target="_blank" rel="noreferrer noopener">《Steem指南》</a>似乎很适合你，10块钱卖你了吧？什么，没钱？那白送你了。” / “小伙，我们村里藏龙卧虎、灵气充沛，只要你肯<a href="https://busy.org/created/teamcn-homework" target="_blank" rel="noreferrer noopener">按时做作业</a>，可保你练成盖世神功，你来还是来还是来？”‌</p>
<p>他看到新人通常都很热情，但新人有时却一脸懵逼，不明白这货是干嘛来了。。。但cn-hello却很自我，每天都要炫耀一下自己勾搭了几位新人。。。‌</p>
<p>其实，@cn-hello 原来是一为牛角挂书的<strong>小牧童</strong>，本是勤于读书问道解惑的，但有了一些学问之后，却有些好为人师，看到迷途之人，免不了希望上前寒暄两句、指教一二。结果就从牧童变成了门童，负责村中的接引、指路一事了。‌</p>
<p>本文以下简单介绍一下他的来历，相关的一些想法，以及之后的计划。欢迎大家给这位小朋友提供建议。</p>
<center><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LXMinqg0EHzgN2ivoTT%2F-Lf-f1i85bMsA7gkxS9Q%2F-Lf-i8DUvz8y8-_lmONJ%2Fimage.png?alt=media&amp;token=b8277e7c-732a-4d74-8c26-715640365d7b" alt=""/></center>

<p style="text-align:center">image source: <a rel="noreferrer noopener" href="https://commons.wikimedia.org/wiki/File:%E9%A2%90%E5%92%8C%E5%9B%AD%E9%95%BF%E5%BB%8A%E5%BD%A9%E7%BB%98.jpg" target="_blank">Wikipedia -- 颐和园长廊彩绘</a> | <a rel="noreferrer noopener" href="https://busy.org/exit?url=https%3A%2F%2Fcreativecommons.org%2Flicenses%2Fby-sa%2F2.0%2F" target="_blank">CC BY-SA 2.0</a>‌</p>
<p></p>
<h2 id="xiao-men-tong-de-jie-shao">小门童的介绍<a href="#xiao-men-tong-de-jie-shao"></a>‌</h2>
<h3 id="lai-li">来历<a href="#lai-li"></a></h3>
<p>设计 @cn-hello 这个机器人（bot）的意义是颇为直接的，相信很多人也遇到过<strong>这个场景</strong>：刚来Steem发帖的时候，兴冲冲发了一个帖子，却无人问津，想要找前辈们请教一下，却不知道应该找谁，到其他作者或大佬帖子下留言，也不见得会被回复。所以cn-hello最初的功能便是为了主动发现身处迷雾之中的新人，告诉他们第一步该怎么走、接下来该怎么做、加入什么组织。‌</p>
<p>然而，本质上说 @cn-hello 也只是<strong>另一个欢迎机器人</strong>罢了<strong>（yet another welcome bot）</strong>，有些欢迎机器人也确实并不令人喜欢，但或许也有一些差异：‌</p>
<ol><li class="">他只关注用<strong>中文</strong>发帖的新人，只给<strong>中文</strong>用户留言；提供的建议也只用<strong>中文</strong>表达；</li><li class="">他提供的帮助信息，如新手村 @team-cn，如《Steem指南》，都是专为中文社区的新人们所创建的，更有<strong>针对性与亲切感</strong>；</li><li class="">与其他某些欢迎机器人（welcome bot）相比，他<strong>并不以私利为目的</strong>而留言或点赞，他不发广告、不求赞，只是希望更好的发现和帮助新人。</li></ol>
<p>虽然只运行了几天，但在帮助新人获取信息、找到团体方面也确实有一些帮助，也帮助我们更好地了解和认识了新人们的生存状态。在后文我们会进一步介绍这些内容。‌</p>
<p>----‌</p>
<p>除了上面提到的这个显而易见的痛点，开始要写这个机器人的动机也有两方面：‌</p>
<ol><li class="">一方面是在讨论《Steem指南》相关问题时，发现虽然有《指南》但很多人还是没有阅读的习惯，所以考虑是否可以实现一个发布攻略的小助手（advisor），根据新人发帖的情况，给他提供相应的修改建议；</li><li class="">另一方面，源于和村长 @ericet 的交流，关于平时是如何找新人进村的，村长说一般是自己去看的，没用什么工具。所以我想可以写个工具和机器人自动化这部分工作，村长也提到已经注册了 @cn-hello 这个账号，想来做类似的事情。</li></ol>
<p>于是大概简单实现了目前的这位 @cn-hello 小门童，或许以后会有更多的功能，也欢迎大家提供建议，目的仍然是切实帮助到新手们。‌</p>
<p>----‌</p>
<p>实际上，<a rel="noreferrer noopener" href="https://busy.org/created/cn-hello" target="_blank">#cn-hello</a> 过去是一个CN区新人常用的自我介绍的标签，最近似乎用的人少了很多。这里用 @cn-hello 作账户，用意也在于帮助新人，所以在意义上较为接近的。‌</p>
<p></p>
<h3 id="gong-neng">功能<a href="#gong-neng"></a></h3>
<p>目前 @cn-hello 主要有两方面的功能：‌</p>
<p><strong>（1）欢迎新人并提供建议</strong>‌</p>
<p> 搜索1天内在 #cn 标签下用中文发表帖子的新人，并在他们的文章下回复新人可能遇到的困难，以及相关的建议，如下图所示：</p>
<center><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LXMinqg0EHzgN2ivoTT%2F-Lf-xxtH0HU5fAA1hdvK%2F-Lf0AAsCpNox71Ic_JJ5%2Fimage.png?alt=media&amp;token=46c99a03-19b7-40a1-a0ec-507da6ebf067" alt=""/></center>

<p style="text-align:center">image source: screenshot from the account @cn-hello 's comment‌</p>
<p>特别地，由于很多新人不了解RC的消耗，回复中添加了新人目前的能量可以发表的文章或回帖的总数，以及每天恢复的能量能发帖的数量。‌</p>
<p>关于中文区新人的定义，目前采用的是如下规则：‌</p>
<ol><li class="">声望在 [25, 35] 的区间内；</li><li class="">SP &lt; 100；</li><li class="">帖子使用中文发表</li></ol>
<p>‌</p>
<p><strong>（2）统计1日和7日的新人动态</strong>‌</p>
<p>现在 @cn-hello 定时于北京时间每日晚10点运行，首先搜索新人并回复，然后发布新人相关的统计信息，如<a href="https://busy.org/@cn-hello/cn-2019-05-10" target="_blank" rel="noreferrer noopener">2019年05月10日的帖子</a>。统计信息包括：‌</p>
<ol><li class="">文章推荐：今日发布帖子的新人以及推荐其中一篇帖子（通常是最新一篇）；</li><li class="">7日新人统计：罗列过去7日发现的新人，以及他们的声望、能量（RC）、帖子数、粉丝数等信息。</li></ol>
<p>这部分统计设计时主要是为了方便老用户为新人提供建议或支持，也可以帮助关注自己在初期的一些关键指标。如下图所示：</p>
<center><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LXMinqg0EHzgN2ivoTT%2F-Lf-f1i85bMsA7gkxS9Q%2F-Lf-mQPa6Mb-P8djTEVA%2Fimage.png?alt=media&amp;token=892640aa-3a86-473f-93cf-a8433cfc021f" alt=""/></center>

<p style="text-align:center">image source: screenshot from the account @cn-hello 's post</p>
<center><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-LXMinqg0EHzgN2ivoTT%2F-Lf-f1i85bMsA7gkxS9Q%2F-Lf-monHD7mDMLumi9ZA%2Fimage.png?alt=media&amp;token=805552c3-0184-49f6-9080-3a47214a9cfc" alt=""/></center>

<p style="text-align:center">image source: screenshot from the account @cn-hello 's post‌</p>
<p>----‌</p>
<p>目前功能是较为简单的，但对于发现新人，确实也有一些帮助；村长也会根据统计和@的通知，找到新人的帖子并帮助一些新手加入村内。‌</p>
<p>同时，也存在一些问题，似乎并不太容易解决，例如：‌</p>
<ol><li class=""><strong>获取反馈困难</strong>：一般很难知道新手是不是读了 @cn-hello 的建议，以及对建议的反馈如何；确实也有一些新人看到了相关的回复，然后主动联系，但总体来说相当少；</li><li class=""><strong>新手可能不理解规则或建议</strong>：推荐的新手的文章有一部分是有抄袭或搬砖的问题的，虽然回复新人时指出了这一点，但可能新手并不理解实际的情况或不愿意相信，依然我行我素，结果还是被踩了。</li></ol>
<p>‌</p>
<h3 id="yuan-ma">源码<a href="#yuan-ma"></a></h3>
<p>总体来说，这是一个较为简单的工程，但基本包括了一个论坛机器人常见的功能：监控、过滤、文本分析、回复、点赞、发表文章、通知，等等。‌</p>
<p>下面是本项目的源代码，开源在 @steem-guides 的GitHub账户下。‌</p>
<ul><li class="">Code Repository: <a href="https://github.com/steem-guides/cn-hello" target="_blank" rel="noreferrer noopener">https://github.com/steem-guides/cn-hello</a> </li><li class="">语言：Python</li></ul>
<p>该机器人提供了如下命令，可供执行：</p>

```bash
Available tasks:

  cn-hello.reply       reply to a post by cn-hello
  cn-hello.search      search the latest posts by newbies
  cn-hello.summarize   publish summary post for daily and weekly update
  cn-hello.vote        vote a post by cn-hello
  cn-hello.welcome     send welcome messages to newbies
  steem.list-posts     list the post by account, tag, keyword, etc. 
```
<p>‌</p> </br>
<p>代码较为简单，这里不赘述。但或许有一些基础类可以被复用，这里简单提一下：‌</p>
<ol><li class="">steem 模块<ol><li class="">collector.py：封装了以账户、标签、天数、数量等查询文章和回复的基本方法，如有需要做此类查询的，或许可以复用其中的 get_posts() / get_comments()；</li><li class="">comment.py 和 account.py：封装了一些常用操作，如各类常用信息的查询、是否被某人赞或者踩、纯文本的提取等;</li></ol></li><li class="">data 模块<ol><li class="">page_language.py：对文本使用的语言检测的封装；</li><li class="">reader.py：可帮助实现监听某tag最新文章；</li></ol></li><li class="">cn_hello 模块<ol><li class="">bot.py, command.py, message.py, newbies.py： 稍作修改可创建一个新的机器人。</li></ol></li></ol>

```bash
├── cn_hello
│   ├── __init__.py
│   ├── bot.py        # the behaviors of the bot
│   ├── command.py    # the commands that trigger the bot to act
│   ├── message.py    # the messages for the bot to speak
│   └── newbies.py    # the data operations of newbies
```

<p></p>
<p>对于如何安装、执行命令等，可以参考GitHub repo的readme中的介绍。‌</p>
<p>所以，如果希望自己快速创建一个机器人实现点赞、回复、监控、通知等功能，或许可以参考这里的开源代码。‌</p>
<p>----‌</p>
<p>关于识别中文，这里直接使用了 langdetect 这个 package，是对<a href="https://code.google.com/p/language-detection/" target="_blank" rel="noreferrer noopener">https://code.google.com/p/language-detection/</a> 项目的python移植。‌</p>
<p>具体可参见<a href="https://www.slideshare.net/shuyo/language-detection-library-for-java" target="_blank" rel="noreferrer noopener">Language Detection Library for Java</a>  中对算法的介绍。其核心是采用了Naive Bayes with character n-gram，计算不同字符拼写特征在哪种语言中出现的概率最高。‌</p>
<p>核心代码在项目的<a rel="noreferrer noopener" href="https://github.com/Mimino666/langdetect/blob/master/langdetect/detector.py" target="_blank">detector.py</a>文件中，如下：</p>

```python
def get_probabilities(self):
    if self.langprob is None:
        self._detect_block()
    return self._sort_probability(self.langprob)

def _detect_block(self):
    self.cleaning_text()
    ngrams = self._extract_ngrams()
    if not ngrams:
        raise LangDetectException(ErrorCode.CantDetectError, 'No features in text.')

    self.langprob = [0.0] * len(self.langlist)

    self.random.seed(self.seed)
    for t in xrange(self.n_trial):
        prob = self._init_probability()
        alpha = self.alpha + self.random.gauss(0.0, 1.0) * self.ALPHA_WIDTH

        i = 0
        while True:
            self._update_lang_prob(prob, self.random.choice(ngrams), alpha)
            if i % 5 == 0:
                if self._normalize_prob(prob) > self.CONV_THRESHOLD or i >= self.ITERATION_LIMIT:
                    break
                if self.verbose:
                    six.print_('>', self._sort_probability(prob))
            i += 1
        for j in xrange(len(self.langprob)):
            self.langprob[j] += prob[j] / self.n_trial
        if self.verbose:
            six.print_('==>', self._sort_probability(prob))

def _extract_ngrams(self):
    '''Extract n-grams from target text.'''
    RANGE = list(xrange(1, NGram.N_GRAM + 1))

    result = []
    ngram = NGram()
    for ch in self.text:
        ngram.add_char(ch)
        if ngram.capitalword:
            continue
        for n in RANGE:
            # optimized w = ngram.get(n)
            if len(ngram.grams) < n:
                break
            w = ngram.grams[-n:]
            if w and w != ' ' and w in self.word_lang_prob_map:
                result.append(w)
    return result
```

<p>code from <a rel="noreferrer noopener" href="https://github.com/Mimino666/langdetect/blob/master/langdetect/detector.py#L143" target="_blank">langdetect project</a> | license: Apache License 2.0‌</p>
<p></p>
<h3 id="wei-lai">未来<a href="#wei-lai"></a></h3>
<p>目前 @cn-hello 小门童的工作主要以接待和引导新人为主。之后的拓展依然以尽力帮助新人为目的，主要的改进可能在以下几个方面，但总体而言目前的优先级并不是非常高：‌</p>
<ol><li class="">提供改进建议：根据作者对标签的使用、收益的情况、文章的主题等，提供在标签使用、活动参与等方面的建议，将《Steem指南》中的特定章节也会一并推送；</li><li class="">优化新人统计信息：给新人推荐其他steem数据分析平台的链接，方便新人了解掌握自己主要的状态和潜在的改进方向，可能只看统计帖子并不是很方便或有效；</li><li class="">优化文章推荐：推荐新人高质量的文章，以及包括提高新人在snax等注意力奖励平台上的收益等。这点似乎很多机器人都在做了，所以或许并不是 @cn-hello 的重点。</li></ol>
<p>对小门童有任何建议，或者希望他还能帮新人们做些什么，请在文章下面留言哦~</p>
<p> ‌</p>
<h2 id="xiao-men-tong-de-si-kao">小门童的思考<a href="#xiao-men-tong-de-si-kao"></a></h2>
<h3 id="dui-xin-ren-de-guan-cha">对新人的观察<a href="#dui-xin-ren-de-guan-cha"></a></h3>
<p>透过 @cn-hello 每日对新人的访问和记录，我们也能获得一些关于新人的观察：‌</p>
<ol><li class="">搬砖的倾向：在过去7人接待的28位新人中，至少有<a href="https://busy.org/@cn-hello/cn-2019-05-16" target="_blank" rel="noreferrer noopener">5位</a>由于搬砖（抄袭）的问题声望被踩到25以下。一方面，我们的提醒没有达成特别好的效果；另一方面，新人不了解规则并希望轻松撸币容易有搬砖的倾向。</li><li class="">“老”新人：大部分 @cn-hello 找到的新人都是1个月以内的创建的（18 / 28），但也有部分账户（6 / 20）已经创建了 1年左右或以上的。或许当时新人来访时，没有很快找到融入社区的方式，所以一直呈现若离若即的状态，希望 cn-hello能帮助缓解这一问题，目前看来似乎也并不容易。</li><li class="">积极的新人：目前积极回应 @cn-hello 的新人只有 （6 / 28）个，并不算很多，但能得到一些有效回应，也算部分完成任务了。</li></ol>
<p>对新人不够友好（同时也是为了防止小号和机器人的泛滥），是Steem的一个严重的问题，也是比较奇怪的地方，但恐怕也是无奈之举。从实际上确实阻碍了新生力量的入场，给新玩家设置了较高的门槛。或许本质上这是西方文明“人性恶”的假设在作怪吧。‌</p>
<p>为了对抗新人面对的挑战，小门童表示不打算放弃新人“拯救”计划。‌</p>
<p></p>
<h3 id="ji-qi-ren-de-yin-xiang">机器人的印象<a href="#ji-qi-ren-de-yin-xiang"></a></h3>
<p>小门童 @cn-hello 是机器人，但令他感到不解的是，steem上很多机器人并不打算遵循阿基莫夫的机器人三大定律或者四大定律，甚至恶行昭彰。</p>
<blockquote class="wp-block-quote"><p><strong>第零法则：</strong>机器人不得伤害整体人类，或坐视整体人类受到伤害；</p><p><strong>第一法则：</strong>除非违背第零法则，否则机器人不得伤害人类，或坐视人类受到伤害；</p><p><strong>第二法则：</strong>除非违背第零或第一法则，否则机器人必须服从人类命令；</p><p><strong>第三法则：</strong>除非违背第零、第一或第二法则，否则机器人必须保护自己。</p>
</blockquote>
<p>‌总体来说，steem上机器人给人的整体印象是不够正面的，既不智能、也不正义（不仁、不智）。‌</p>
<p>事实上，像“三大定律”这样义务化的伦理确实不适合steem上的机器人，他们不过是人的延伸，并不具有被编码的“道德”。或许在可预见的未来，人工智能的潜在危害也不过是“恶”的延伸，问题不在与机器本身有多智能，而首先在于设计和使用它的人是否能约束自身的贪婪和享乐的倾向。‌</p>
<p>----‌</p>
<p>如果想要进一步了解steem上的机器人，《Steem指南》的<a href="https://steem-guides.github.io/steemh/jqrp.html" target="_blank" rel="noreferrer noopener">机器人篇</a>对于机器人有一些不完全的介绍，可作参考。‌</p>
<p>在帮助新人方面，@cn-hello 也只不过是其中之一。CN区还有很多可爱的机器人，有些依然活跃，有些则已经进入休假状态，比如 @cn-cutie.pie 和 @cn-naughty.boy。‌</p>
<p>之前的一些过去关于机器人问题的讨论，或许也可以作为参考：‌</p>
<ol><li class=""><a href="https://steemit.com/cn/@oflyhigh/robots-on-steemit" target="_blank" rel="noreferrer noopener">聊聊机器人🤖 / Robots on STEEMIT</a></li><li class=""><a href="https://steemit.com/btc/@myfirst/steemit" target="_blank" rel="noreferrer noopener">steemit 还是机器人的天下</a></li><li class=""><a href="https://steemit.com/cn/@oflyhigh/steemit" target="_blank" rel="noreferrer noopener">机器人是否会破坏steemit上的生态平衡？</a></li></ol>
<p>‌@maiyude 的机器人教程，也可供初学者阅读，我们稍后也会整合到《Steem指南》中。‌</p>
<ol><li class="">steem-python 介绍：<a href="https://steemit.com/cn/@maiyude/steem-python-1-steem" target="_blank" rel="noreferrer noopener">（1）</a><a href="https://steemit.com/cn/@maiyude/steem-python-1-pose-vote" target="_blank" rel="noreferrer noopener">（2）</a></li><li class="">点赞机器人开发：<a href="https://steemit.com/cn/@maiyude/steem-12-3-1-1" target="_blank" rel="noreferrer noopener">（1）</a><a href="https://steemit.com/cn/@maiyude/steem-12-3-1-2" target="_blank" rel="noreferrer noopener">（2）</a><a href="https://steemit.com/cn/@maiyude/steem-12-3-2-1-vp" target="_blank" rel="noreferrer noopener">（3）</a></li></ol>
<p>----‌</p>
<p>虽然对于steem上的机器人存在许多争议，但所谓“自反而缩，虽千万人，吾往矣”，小门童希望能尽自己的一点绵薄之力，便已经足够了 :)‌</p>
<p></p>
<h2 id="can-kao-wen-xian">参考文献<a href="#can-kao-wen-xian"></a></h2>
<ol><li class="">Wikipedia，<a href="https://zh.wikipedia.org/wiki/%E6%9C%BA%E5%99%A8%E4%BA%BA%E4%B8%89%E5%AE%9A%E5%BE%8B" target="_blank" rel="noreferrer noopener">机器人三定律</a></li><li class=""><a href="https://www.slideshare.net/shuyo?utm_campaign=profiletracking&amp;utm_medium=sssite&amp;utm_source=ssslideview" target="_blank" rel="noreferrer noopener">Shuyo Nakatani</a>，<a href="https://www.slideshare.net/shuyo/language-detection-library-for-java" target="_blank" rel="noreferrer noopener">Language Detection Library for Java</a>，2010年</li></ol>
 <br /><center><hr/><em>Posted from my blog with <a href='https://wordpress.org/plugins/steempress/'>SteemPress</a> : https://robertyan.000webhostapp.com/2019/05/%e5%80%9f%e9%97%ae%e5%b8%88%e5%8f%8b%e4%bd%95%e5%a4%84%e6%9c%89%ef%bc%8c%e9%97%a8%e7%ab%a5%e9%81%a5%e6%8c%87%e6%96%b0%e6%89%8b%e6%9d%91-%e5%85%b3%e4%ba%8e-cn-hello-%e5%b0%8f%e5%8f%8b%e7%9a%84 </em><hr/></center>  

- - -

This page is synchronized from the post: [借问师友何处有，门童遥指新手村 | 关于 @cn-hello 小友的来历](https://steemit.com/@robertyan/cn-hello-oqz3cshda1)
