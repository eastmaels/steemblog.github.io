
---
title: '服务器无缘无故挂了第一步是检查硬盘空间'
permlink: 6nbaka
catalog: true
toc_nav_num: true
toc: true
position: 9999
date: 2017-11-27 15:43:57
categories:
- cn
tags:
- cn
- linux
- server
- node
- mongdb
thumbnail: https://steemitimages.com/DQmRAbPCrHz3PqaqUnWAVSoeAXeDfGHAaHPU7VcUuFsMmG3/image.png
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


朋友说，网站挂了，显示 无法连接 connection_refused 让我看看是啥原因，毕竟这分秒就是钱，于是马上登陆，检查日志，

![](https://steemitimages.com/DQmRAbPCrHz3PqaqUnWAVSoeAXeDfGHAaHPU7VcUuFsMmG3/image.png)

网站框架是 node + mongodb，我发现 数据库挂了，怎么也启动不了

```
$ sudo service mongd restart
Unknown instance:
```

我看了一下 mongd的 日志： `sudo vim /var/log/mongdb/error.log`

发现写着 insufficient disk space, 怪不得，用 `df -h` 查看了一下，果然：

![](https://steemitimages.com/DQmSGRk82w7vAanvbxsY3c1YFDshizo7fYyzBtE9qQs4ySr/image.png)

然后最直接的方法就是 删删删，

`sudo rm -f /var/log/`

为了防止类似的问题，在 `sudo crontab -e` 里加上:

```
@weekly rm -f /var/log/
```

每7天删除日志。 这应该不是第一次碰到类似的问题，服务器在没有[硬盘](https://justyy.com/archives/3948)空间的情况下，很多服务都会挂，特别是没有管理员登陆或者误操作的情况下，这应该是很有可能的[原因之一](https://justyy.com/archives/5636)。




-----

## YY银行
- [cnbuddy 和 YY 银行的区别，哪个更适合你？](https://steemit.com/cn/@justyy/cnbuddy-yy)
- [cn区最低保障系统 上线了!](https://steemit.com/cn/@justyy/cn-introduction-to-the-cn-wechat-group-voting-robot-justyy)
- [cn区低保计划（鼓励新人）真的适合你么？](https://steemit.com/cn/@justyy/56dta3-cn)
## 日报
- [今天(2017-11-27) 银行股东名单](https://steemit.com/cn-stats/@justyy/daily-cn-updates-cnyy2017-11-27)
- [CN 中文区每日【财富总值】【活跃统计数据】](https://steemit.com/cn-stats/@justyy/cn--2017-11-27)
- [CN 中文区每日【点赞收益年化率】【YY银行利息统计】](https://steemit.com/cn-stats/@justyy/cn-yy-2017-11-26)
## 工具
- [SteemIt SP Delegation Tool 简易SP代理工具](https://steemit.com/cn/@justyy/steemit-sp-delegation-tool-sp)
- [Steemit 在线工具，机器人， API接口和教程](https://helloacm.com/tools/steemit-tools/)
- [SteemIt Tutorials, Robots, Tools and APIs](https://helloacm.com/tools/steemit/)

赶紧加入CN区低保银行、成为股东、好处多多、每天收获点赞并且能获得5%的利息（发放SBD）。

- - -

This page is synchronized from the post: [服务器无缘无故挂了第一步是检查硬盘空间](https://steemit.com/@justyy/6nbaka)
