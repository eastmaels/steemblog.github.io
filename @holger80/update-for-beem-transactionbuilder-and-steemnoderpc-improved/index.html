
<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Update for beem - transactionbuilder and SteemNodeRPC  improved - Holger</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<link rel="icon" href="https://www.easyicon.net/api/resizeApi.php?id=1185564&size=32">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    




    
    

    
    
    
    

    
    

<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/@holger80/css/style.css">

<link rel="stylesheet" href="/@holger80/css/bundle.css"></head>
<body class="is-2-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/@holger80/">
            
                <img src="https://avatars0.githubusercontent.com/u/50857551?s=200&v=4" alt="Holger" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/@holger80/">Home</a>
                
                <a class="navbar-item" href="/@holger80/archives">Archives</a>
                
                <a class="navbar-item" href="/@holger80/categories">Categories</a>
                
                <a class="navbar-item" href="/@holger80/tags">Tags</a>
                
                <a class="navbar-item" href="/@holger80/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="Catálogo" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>

    
    <section class="section">
        <div class="container">
            <div class="columns">
                

                





<div class="column is-4-tablet is-4-desktop is-4-widescreen  has-order-3 column-right is-sticky">
    
        
<div class="card widget" id="toc">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Catálogo
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#GrapheneRPC-and-SteemNodeRPC-improved">
        <span class="has-mr-6">1</span>
        <span>GrapheneRPC and SteemNodeRPC improved</span>
        </a></li><li>
        <a class="is-flex" href="#Calculate-the-needed-voting-percentage-for-certain-rshares">
        <span class="has-mr-6">2</span>
        <span>Calculate the needed voting percentage for certain rshares</span>
        </a></li><li>
        <a class="is-flex" href="#Transactionbuilder-improved">
        <span class="has-mr-6">3</span>
        <span>Transactionbuilder improved</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Using-a-wallet-or-not">
        <span class="has-mr-6">3.1</span>
        <span>Using a wallet or not</span>
        </a></li><li>
        <a class="is-flex" href="#Sign-transactions-with-beem-without-using-the-wallet-and-build-the-transaction-by-hand">
        <span class="has-mr-6">3.2</span>
        <span>Sign transactions with beem without using the wallet and build the transaction by hand</span>
        </a></li><li>
        <a class="is-flex" href="#Using-the-wallet">
        <span class="has-mr-6">3.3</span>
        <span>Using the wallet</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Setting-a-password-and-store-the-keys-permanent">
        <span class="has-mr-6">3.3.1</span>
        <span>Setting a password and store the keys permanent</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Storing-the-keys-temporary">
        <span class="has-mr-6">3.4</span>
        <span>Storing the keys temporary</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Using-account-transfer">
        <span class="has-mr-6">3.4.1</span>
        <span>Using account.transfer</span>
        </a></li><li>
        <a class="is-flex" href="#Build-your-Transaction-by-hand">
        <span class="has-mr-6">3.4.2</span>
        <span>Build your Transaction by hand</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Offline-signing-with-two-different-wallets">
        <span class="has-mr-6">3.5</span>
        <span>Offline signing with two different wallets</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#user-a">
        <span class="has-mr-6">3.5.1</span>
        <span>user_a</span>
        </a></li><li>
        <a class="is-flex" href="#user-c">
        <span class="has-mr-6">3.5.2</span>
        <span>user_c</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Offline-signing-with-two-different-wallets-storing-the-keys-temporary">
        <span class="has-mr-6">3.6</span>
        <span>Offline signing with two different wallets storing the keys temporary</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#user-a-1">
        <span class="has-mr-6">3.6.1</span>
        <span>user_a</span>
        </a></li><li>
        <a class="is-flex" href="#user-c-1">
        <span class="has-mr-6">3.6.2</span>
        <span>user_c</span>
        </a></li></ul></li></ul></li><li>
        <a class="is-flex" href="#Store-streamed-blocks-in-gzipped-text-files">
        <span class="has-mr-6">4</span>
        <span>Store streamed blocks in gzipped text files</span>
        </a></li><li>
        <a class="is-flex" href="#Full-API-node-benchmark-script">
        <span class="has-mr-6">5</span>
        <span>Full API node benchmark script</span>
        </a></li><li>
        <a class="is-flex" href="#Changes">
        <span class="has-mr-6">6</span>
        <span>Changes</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#rpc-improvements">
        <span class="has-mr-6">6.1</span>
        <span>rpc improvements</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#account">
        <span class="has-mr-6">6.1.1</span>
        <span>account</span>
        </a></li><li>
        <a class="is-flex" href="#amount">
        <span class="has-mr-6">6.1.2</span>
        <span>amount</span>
        </a></li><li>
        <a class="is-flex" href="#steem">
        <span class="has-mr-6">6.1.3</span>
        <span>steem</span>
        </a></li><li>
        <a class="is-flex" href="#transactionbuilder">
        <span class="has-mr-6">6.1.4</span>
        <span>transactionbuilder</span>
        </a></li><li>
        <a class="is-flex" href="#utils">
        <span class="has-mr-6">6.1.5</span>
        <span>utils</span>
        </a></li><li>
        <a class="is-flex" href="#steemnoderpc">
        <span class="has-mr-6">6.1.6</span>
        <span>steemnoderpc</span>
        </a></li><li>
        <a class="is-flex" href="#objects">
        <span class="has-mr-6">6.1.7</span>
        <span>objects</span>
        </a></li><li>
        <a class="is-flex" href="#exception">
        <span class="has-mr-6">6.1.8</span>
        <span>exception</span>
        </a></li><li>
        <a class="is-flex" href="#grapherpc">
        <span class="has-mr-6">6.1.9</span>
        <span>grapherpc</span>
        </a></li><li>
        <a class="is-flex" href="#unit-tests">
        <span class="has-mr-6">6.1.10</span>
        <span>unit tests</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#More-Unit-tests">
        <span class="has-mr-6">6.2</span>
        <span>More Unit tests</span>
        </a></li><li>
        <a class="is-flex" href="#Improve-handling-of-lists-as-rpc-reply">
        <span class="has-mr-6">6.3</span>
        <span>Improve handling of lists as rpc reply</span>
        </a></li><li>
        <a class="is-flex" href="#Improve-coverage-for-graphenerpc">
        <span class="has-mr-6">6.4</span>
        <span>Improve coverage for graphenerpc</span>
        </a></li><li>
        <a class="is-flex" href="#Transactionbuilder-improved-and-more-unit-tests">
        <span class="has-mr-6">6.5</span>
        <span>Transactionbuilder improved and more unit tests</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Steem">
        <span class="has-mr-6">6.5.1</span>
        <span>Steem</span>
        </a></li><li>
        <a class="is-flex" href="#Transactionbuilder">
        <span class="has-mr-6">6.5.2</span>
        <span>Transactionbuilder</span>
        </a></li><li>
        <a class="is-flex" href="#Wallet">
        <span class="has-mr-6">6.5.3</span>
        <span>Wallet</span>
        </a></li><li>
        <a class="is-flex" href="#Graphenerpc">
        <span class="has-mr-6">6.5.4</span>
        <span>Graphenerpc</span>
        </a></li><li>
        <a class="is-flex" href="#Publickey">
        <span class="has-mr-6">6.5.5</span>
        <span>Publickey</span>
        </a></li><li>
        <a class="is-flex" href="#Unit-tests">
        <span class="has-mr-6">6.5.6</span>
        <span>Unit tests</span>
        </a></li><li>
        <a class="is-flex" href="#test-steem">
        <span class="has-mr-6">6.5.7</span>
        <span>test_steem:</span>
        </a></li><li>
        <a class="is-flex" href="#tst-testnet">
        <span class="has-mr-6">6.5.8</span>
        <span>tst_testnet:</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Examples-added">
        <span class="has-mr-6">6.6</span>
        <span>Examples added</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Wallet-1">
        <span class="has-mr-6">6.6.1</span>
        <span>Wallet</span>
        </a></li><li>
        <a class="is-flex" href="#Examples">
        <span class="has-mr-6">6.6.2</span>
        <span>Examples</span>
        </a></li><li>
        <a class="is-flex" href="#write-blocks-to-file">
        <span class="has-mr-6">6.6.3</span>
        <span>write blocks to file</span>
        </a></li><li>
        <a class="is-flex" href="#post-to-html">
        <span class="has-mr-6">6.6.4</span>
        <span>post_to_html</span>
        </a></li><li>
        <a class="is-flex" href="#post-to-md">
        <span class="has-mr-6">6.6.5</span>
        <span>post_to_md</span>
        </a></li><li>
        <a class="is-flex" href="#Unit-tests-1">
        <span class="has-mr-6">6.6.6</span>
        <span>Unit tests</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Refactoring-and-improvements">
        <span class="has-mr-6">6.7</span>
        <span>Refactoring and improvements</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Comment">
        <span class="has-mr-6">6.7.1</span>
        <span>Comment</span>
        </a></li><li>
        <a class="is-flex" href="#storage">
        <span class="has-mr-6">6.7.2</span>
        <span>storage</span>
        </a></li><li>
        <a class="is-flex" href="#Vote">
        <span class="has-mr-6">6.7.3</span>
        <span>Vote</span>
        </a></li><li>
        <a class="is-flex" href="#Exception">
        <span class="has-mr-6">6.7.4</span>
        <span>Exception</span>
        </a></li><li>
        <a class="is-flex" href="#Steemnoderpc">
        <span class="has-mr-6">6.7.5</span>
        <span>Steemnoderpc</span>
        </a></li><li>
        <a class="is-flex" href="#Transaction">
        <span class="has-mr-6">6.7.6</span>
        <span>Transaction</span>
        </a></li><li>
        <a class="is-flex" href="#Unit-tests-2">
        <span class="has-mr-6">6.7.7</span>
        <span>Unit tests</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Add-clearWifs-and-improve-unit-tests">
        <span class="has-mr-6">6.8</span>
        <span>Add clearWifs and improve unit tests</span>
        </a></li><li>
        <a class="is-flex" href="#Transactionbuild">
        <span class="has-mr-6">6.9</span>
        <span>Transactionbuild</span>
        </a></li><li>
        <a class="is-flex" href="#Examples-1">
        <span class="has-mr-6">6.10</span>
        <span>Examples</span>
        </a></li><li>
        <a class="is-flex" href="#test-testnet">
        <span class="has-mr-6">6.11</span>
        <span>test_testnet</span>
        </a></li><li>
        <a class="is-flex" href="#benchmark-nodes2-added">
        <span class="has-mr-6">6.12</span>
        <span>benchmark_nodes2 added</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Graphenerpc-1">
        <span class="has-mr-6">6.12.1</span>
        <span>Graphenerpc</span>
        </a></li><li>
        <a class="is-flex" href="#benchmark-nodes2-added-1">
        <span class="has-mr-6">6.12.2</span>
        <span>benchmark_nodes2 added</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#metadata-to-dict-added-to-comment">
        <span class="has-mr-6">6.13</span>
        <span>_metadata_to_dict added to comment</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#test-comment">
        <span class="has-mr-6">6.13.1</span>
        <span>test_comment</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Improved-numerical-calculation-of-votes">
        <span class="has-mr-6">6.14</span>
        <span>Improved numerical calculation of votes</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Steem-1">
        <span class="has-mr-6">6.14.1</span>
        <span>Steem</span>
        </a></li><li>
        <a class="is-flex" href="#beemgrapheneapi">
        <span class="has-mr-6">6.14.2</span>
        <span>beemgrapheneapi</span>
        </a></li></ul></li></ul></li></ul>
        </div>
    </div>
</div>


    
    
</div>


                <script src="/@holger80/js/pjax-widget.js"></script>

                <div class="column is-8-tablet is-8-desktop is-8-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span class="image is-7by1">
            <img class="thumbnail" src="/@holger80/None" alt="Update for beem - transactionbuilder and SteemNodeRPC  improved">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-04-11T19:32:18.000Z">2018-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/@holger80/categories/utopian-io/">utopian-io</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16 minutes read (About 2368 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Update for beem - transactionbuilder and SteemNodeRPC  improved
            
        </h1>
        <div class="content">
            <p><a href="https://github.com/holgern/beem" target="_blank" rel="noopener">beem</a> is a python library for steem. The newest version is 0.19.21. There are now 363 unit tests with a coverage of 84%. Running all tests takes about one hour.</p>
<p>I created a discord channel for answering question or discussing beem: <a href="https://discord.gg/4HM592V" target="_blank" rel="noopener">https://discord.gg/4HM592V</a></p>
<p>I requested a logo for beem, you can participate and submit <a href="https://utopian.io/utopian-io/@holger80/logo-request-for-beem-a-python-library-for-steem" target="_blank" rel="noopener">here</a> until 13 April 23:59 UTC.</p>
<h1 id="GrapheneRPC-and-SteemNodeRPC-improved"><a href="#GrapheneRPC-and-SteemNodeRPC-improved" class="headerlink" title="GrapheneRPC and SteemNodeRPC improved"></a>GrapheneRPC and SteemNodeRPC improved</h1><p>Thanks to the node issues, exception handling could be greatly improved. The error count is now indviduall for each node. </p>
<p>Every time an error was observed, the error count for the specific node is increased and the next node from the list is used. There is <code>num_retries</code> which is normally deactivated (-1), but when set, <code>NumRetriesReached</code> is raised when</p>
<ul>
<li>one node is in the list and  <code>NumRetriesReached</code> errors are observed</li>
<li>more than one node is in the list and node <code>x</code> was used <code>NumRetriesReached</code> times and everytime an error occured. The other nodes are also faulty and therefore node <code>x</code> was tried <code>NumRetriesReached</code> times.</li>
</ul>
<p><code>num_retries_call</code> is newly introduced and normally set to 5. When an RPC call was not successfully and the error means that it could work when retrying, <code>error_cnt_call</code> is increased and the same call is retried. Only when <code>num_retries_call</code> is reached, the next node is used. The error count for <code>num_retries_call</code> is resetted after each sucessfull RPC call.</p>
<p>Different kind of server errors are parsed now and handled.</p>
<h1 id="Calculate-the-needed-voting-percentage-for-certain-rshares"><a href="#Calculate-the-needed-voting-percentage-for-certain-rshares" class="headerlink" title="Calculate the needed voting percentage for certain rshares"></a>Calculate the needed voting percentage for certain rshares</h1><p><code>rshares_to_vote_pct</code> was added to the steem class. A vote with 1e9 rshares should be casted. The voter has 500 Steem Power and 93% voting power left. What is the needed vote percentage?<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from beem import Steem</span><br><span class="line">stm = Steem()</span><br><span class="line">stm.rshares_to_vote_pct(1e9, steem_power=500, voting_power=9300)</span><br><span class="line">537</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>The vote should be casted with 5.37%.</p>
<h1 id="Transactionbuilder-improved"><a href="#Transactionbuilder-improved" class="headerlink" title="Transactionbuilder improved"></a>Transactionbuilder improved</h1><p>Thanks to the <a href="https://steemit.com/utopian-io/@holger80/update-for-beem-coverage-improved-and-other-improvements#@leprechaun/re-holger80-update-for-beem-coverage-improved-and-other-improvements-20180407t143916795z" target="_blank" rel="noopener">unit tests</a> from @leprechaun, I could improve the Transactionbuilder in the newest version of beem.</p>
<p>A transaction is a JSON structure and consists of </p>
<ul>
<li><code>expiration</code></li>
<li><code>ref_block_num</code></li>
<li><code>ref_block_prefix</code></li>
<li><code>operations</code></li>
<li><code>extensions</code></li>
<li><code>signatures</code></li>
</ul>
<p>Here you can see an example for a transfer transaction:<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{&apos;expiration&apos;: &apos;2018-04-09T15:35:21&apos;, &apos;ref_block_num&apos;: 12523,</span><br><span class="line">&apos;ref_block_prefix&apos;: 2784763404,</span><br><span class="line">&apos;operations&apos;: [[&apos;transfer&apos;, {&apos;from&apos;: &apos;user_a&apos;, &apos;to&apos;: &apos;user_b&apos;, &apos;amount&apos;: &apos;0.010 SBD&apos;,</span><br><span class="line">&apos;memo&apos;: &apos;hello&apos;}]],</span><br><span class="line">&apos;extensions&apos;: [], &apos;signatures&apos;: []}</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>A transaction is build by the <code>TransactionBuilder</code> and can only be broadcast to the blockchain, when it is correctly signed. A <code>transfer</code> transaction must be signed by the <code>active</code> private key of the sender and broadcasted before <code>expiration</code>.</p>
<p>There is the possibility to add other accounts, that are able to or must sign. The transaction can then be transmitted when at least <code>weight_threshold</code> accounts from the list signed the transaction.<br>For example, the account of user <code>user_a</code> has for its <code>active</code> key one addional user <code>user_c</code> which must also sign all transaction, as the <code>weight_threshold</code> is 2.</p>
<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">account[&quot;active&quot;] = </span><br><span class="line">{&apos;weight_threshold&apos;: 2, &apos;account_auths&apos;: [[&apos;user_c&apos;, 1]], &apos;key_auths&apos;: [[&apos;STM...&apos;, 1]]}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Using-a-wallet-or-not"><a href="#Using-a-wallet-or-not" class="headerlink" title="Using a wallet or not"></a>Using a wallet or not</h2><p>The functions:</p>
<ul>
<li><code>appendSigner</code></li>
<li><code>addSigningInformation</code></li>
<li><code>appendMissingSignatures</code></li>
</ul>
<p>can only be used when private keys were stored in the wallet.<br>Whenever the keys should be set directly, only </p>
<ul>
<li><code>appendWif</code></li>
</ul>
<p>must be used.</p>
<h2 id="Sign-transactions-with-beem-without-using-the-wallet-and-build-the-transaction-by-hand"><a href="#Sign-transactions-with-beem-without-using-the-wallet-and-build-the-transaction-by-hand" class="headerlink" title="Sign transactions with beem without using the wallet and build the transaction by hand"></a>Sign transactions with beem without using the wallet and build the transaction by hand</h2><p>When not using the wallet, the transaction has to build by hand.</p>
<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from beem import Steem</span><br><span class="line">from beem.transactionbuilder import TransactionBuilder</span><br><span class="line">stm = Steem()</span><br><span class="line">tx = TransactionBuilder(steem_instance=stm)</span><br><span class="line">tx.appendOps(Transfer(**{&quot;from&quot;: &apos;user_a&apos;,</span><br><span class="line">                         &quot;to&quot;: &apos;user_b&apos;,</span><br><span class="line">                         &quot;amount&quot;: &apos;1.000 SBD&apos;,</span><br><span class="line">                         &quot;memo&quot;: &apos;test 2&apos;}))</span><br><span class="line">tx.appendWif(&apos;5.....&apos;) # `user_a`</span><br><span class="line">tx.appendWif(&apos;5.....&apos;) # `user_c`</span><br><span class="line">tx.sign()</span><br><span class="line">tx.broadcast()</span><br></pre></td></tr></tbody></table></figure>
<p>When <code>user_a</code> and <code>user_c</code> should not share their password, the last 4 lines become:<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tx.appendWif(&apos;5.....&apos;) # `user_a`</span><br><span class="line">tx.sign()</span><br><span class="line">tx.clearWifs()</span><br><span class="line">tx_json = tx.json()</span><br><span class="line"># Send the tx_json structure to `user_c` and be sure that `tx_json[&quot;expiration&quot;] is in the future.</span><br><span class="line">tx = TransactionBuilder(tx=tx_json, steem_instance=stm)</span><br><span class="line">tx.appendWif(&apos;5.....&apos;) # `user_c`</span><br><span class="line">tx.sign(reconstruct_tx=False)</span><br><span class="line">tx.broadcast()</span><br></pre></td></tr></tbody></table></figure><p></p>
<p><code>tx.sign(reconstruct_tx=False)</code> does not delete the signature from <code>user_a</code>.</p>
<h2 id="Using-the-wallet"><a href="#Using-the-wallet" class="headerlink" title="Using the wallet"></a>Using the wallet</h2><p>When using the wallet, high level functions as  <code>beem.account.transfer</code><br>can be used. The keys can be stored permanent or temporary.</p>
<h3 id="Setting-a-password-and-store-the-keys-permanent"><a href="#Setting-a-password-and-store-the-keys-permanent" class="headerlink" title="Setting a password and store the keys permanent"></a>Setting a password and store the keys permanent</h3><p>Let&#x2019;s assume the wallet is ready and a wallet-password is set. If not, a wallet can be started from zero with:<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from beem import Steem</span><br><span class="line">stm = Steem()</span><br><span class="line">stm.wallet.wipe(True)</span><br><span class="line">stm.wallet.create(&quot;secret_password&quot;)</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>In this case, we are taking the example from above, where <code>user_a</code> and <code>user_c</code> has to sign.<br>At the first time, the private keys must added to the wallet:<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stm.wallet.unlock(&quot;secret_password&quot;)</span><br><span class="line">stm.wallet.addPrivateKey(&quot;5............&quot;) # active private key from user_a</span><br><span class="line">stm.wallet.addPrivateKey(&quot;5............&quot;) # active private key from user_c</span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="Storing-the-keys-temporary"><a href="#Storing-the-keys-temporary" class="headerlink" title="Storing the keys temporary"></a>Storing the keys temporary</h2><p>Both private keys are stored temporary in the wallet, when they are given to the Steem class by:<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from beem import Steem</span><br><span class="line">stm = Steem(keys=[&quot;5............&quot;, &quot;5............&quot;]) # active keys from user_a and user_c</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>The keys are stored in <code>stm.wallet.keys</code> and can be deleted by <code>stm.wallet.clear_local_keys()</code>.<br>With <code>stm.wallet.setKeys(&apos;5....&apos;)</code> new keys can be added to the temporary storage.  </p>
<h3 id="Using-account-transfer"><a href="#Using-account-transfer" class="headerlink" title="Using account.transfer"></a>Using account.transfer</h3><p>Now, we can start to broadcast a transaction (transfer 1 SBD from user_a to user_b with memo &#x201C;test&#x201D;):<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from beem.account import Account</span><br><span class="line">from beem import Steem</span><br><span class="line">stm = Steem()</span><br><span class="line">stm.wallet.unlock(&quot;secret_password&quot;)</span><br><span class="line">acc = Account(&quot;user_a&quot;, steem_instance=stm)</span><br><span class="line">acc.transfer(&quot;user_b&quot;, 1, &quot;SBD&quot;, memo=&quot;test&quot;)</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>When the keys should be stored only temporary, it can be done by replacing:<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stm = Steem()</span><br><span class="line">stm.wallet.unlock(&quot;secret_password&quot;)</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>with<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from beem import Steem</span><br><span class="line">stm = Steem(keys=[&quot;5............&quot;, &quot;5............&quot;]) # keys from user_a and user_c</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>The transfer function automatically detects that the transaction has to be signed by <code>user_a</code> and <code>user_c</code> and searching for the keays in the wallet. When all were found, the transaction is signed and broadcasted.</p>
<h3 id="Build-your-Transaction-by-hand"><a href="#Build-your-Transaction-by-hand" class="headerlink" title="Build your Transaction by hand"></a>Build your Transaction by hand</h3><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from beem.transactionbuilder import TransactionBuilder</span><br><span class="line">from beem import Steem</span><br><span class="line">stm = Steem()</span><br><span class="line">stm.wallet.unlock(&quot;secret_password&quot;)</span><br><span class="line">tx = TransactionBuilder(steem_instance=stm)</span><br><span class="line">tx.appendOps(Transfer(**{&quot;from&quot;: &apos;user_a&apos;,</span><br><span class="line">                         &quot;to&quot;: &apos;user_b&apos;,</span><br><span class="line">                         &quot;amount&quot;: &apos;1.000 SBD&apos;,</span><br><span class="line">                         &quot;memo&quot;: &apos;test 2&apos;}))</span><br><span class="line">tx.appendSigner(&apos;user_a&apos;, &apos;active&apos;)</span><br><span class="line">tx.sign()</span><br><span class="line">tx.broadcast()</span><br></pre></td></tr></tbody></table></figure>
<p>It is detected that <code>user_c</code> is needed and automatically added. The private keys can also be stored temporary as in the example above.</p>
<h2 id="Offline-signing-with-two-different-wallets"><a href="#Offline-signing-with-two-different-wallets" class="headerlink" title="Offline signing with two different wallets"></a>Offline signing with two different wallets</h2><h3 id="user-a"><a href="#user-a" class="headerlink" title="user_a"></a><code>user_a</code></h3><p><code>stm.wallet</code> contains now only the active key of <code>user_a</code><br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from beem.transactionbuilder import TransactionBuilder</span><br><span class="line">from beem import Steem</span><br><span class="line">stm = Steem()</span><br><span class="line">stm.wallet.unlock(&quot;secret_password&quot;)</span><br><span class="line">tx = TransactionBuilder(steem_instance=stm)</span><br><span class="line">tx.appendOps(Transfer(**{&quot;from&quot;: &apos;user_a&apos;,</span><br><span class="line">                         &quot;to&quot;: &apos;user_b&apos;,</span><br><span class="line">                         &quot;amount&quot;: &apos;1.000 SBD&apos;,</span><br><span class="line">                         &quot;memo&quot;: &apos;test 2&apos;}))</span><br><span class="line">tx.appendSigner(&apos;user_a&apos;, &apos;active&apos;)</span><br><span class="line">tx.addSigningInformation(&quot;user_a&quot;, &quot;active&quot;)</span><br><span class="line">tx.sign()</span><br><span class="line">tx.clearWifs()</span><br><span class="line">tx_json = tx.json()</span><br></pre></td></tr></tbody></table></figure><p></p>
<p><code>tx_json</code> is now sended to <code>user_c</code></p>
<h3 id="user-c"><a href="#user-c" class="headerlink" title="user_c"></a><code>user_c</code></h3><p><code>stm.wallet</code> contains now only the active key of <code>user_c</code><br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from beem.transactionbuilder import TransactionBuilder</span><br><span class="line">from beem import Steem</span><br><span class="line">stm = Steem()</span><br><span class="line">stm.wallet.unlock(&quot;secret_password&quot;)</span><br><span class="line">tx = TransactionBuilder(tx=tx_json, steem_instance=stm)</span><br><span class="line">tx.appendMissingSignatures()</span><br><span class="line">tx.sign(reconstruct_tx=False)</span><br><span class="line">tx.broadcast()</span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="Offline-signing-with-two-different-wallets-storing-the-keys-temporary"><a href="#Offline-signing-with-two-different-wallets-storing-the-keys-temporary" class="headerlink" title="Offline signing with two different wallets storing the keys temporary"></a>Offline signing with two different wallets storing the keys temporary</h2><h3 id="user-a-1"><a href="#user-a-1" class="headerlink" title="user_a"></a><code>user_a</code></h3><p><code>stm.wallet</code> is now empty.<br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from beem.transactionbuilder import TransactionBuilder</span><br><span class="line">from beem import Steem</span><br><span class="line">stm = Steem(keys=[&quot;5............&quot;]) # keys from user_a</span><br><span class="line">tx = TransactionBuilder(steem_instance=stm)</span><br><span class="line">tx.appendOps(Transfer(**{&quot;from&quot;: &apos;user_a&apos;,</span><br><span class="line">                         &quot;to&quot;: &apos;user_b&apos;,</span><br><span class="line">                         &quot;amount&quot;: &apos;1.000 SBD&apos;,</span><br><span class="line">                         &quot;memo&quot;: &apos;test 2&apos;}))</span><br><span class="line">tx.appendSigner(&apos;user_a&apos;, &apos;active&apos;)</span><br><span class="line">tx.addSigningInformation(&quot;user_a&quot;, &quot;active&quot;)</span><br><span class="line">tx.sign()</span><br><span class="line">tx.clearWifs()</span><br><span class="line">tx_json = tx.json()</span><br></pre></td></tr></tbody></table></figure><p></p>
<p><code>tx_json</code> is now sended to <code>user_c</code></p>
<h3 id="user-c-1"><a href="#user-c-1" class="headerlink" title="user_c"></a><code>user_c</code></h3><p><code>stm.wallet</code> contains now only the active key of <code>user_c</code><br></p><figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from beem.transactionbuilder import TransactionBuilder</span><br><span class="line">from beem import Steem</span><br><span class="line">stm = Steem(keys=[&quot;5............&quot;]) # keys from user_c</span><br><span class="line">tx = TransactionBuilder(tx=tx_json, steem_instance=stm)</span><br><span class="line">tx.appendMissingSignatures()</span><br><span class="line">tx.sign(reconstruct_tx=False)</span><br><span class="line">tx.broadcast()</span><br></pre></td></tr></tbody></table></figure><p></p>
<h1 id="Store-streamed-blocks-in-gzipped-text-files"><a href="#Store-streamed-blocks-in-gzipped-text-files" class="headerlink" title="Store streamed blocks in gzipped text files"></a>Store streamed blocks in gzipped text files</h1><p>I added a script which using pickle to serialize a block and then creates a hex number of it.<br>This line is then written as gzipped text file. One blockchain hour needs around 7 MB of disk space.<br>The advantage of this approach is that each line belongs to one block.<br>The example can be found here: <a href="https://github.com/holgern/beem/blob/master/examples/write_blocks_to_file.py" target="_blank" rel="noopener">https://github.com/holgern/beem/blob/master/examples/write_blocks_to_file.py</a></p>
<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">from binascii import hexlify, unhexlify</span><br><span class="line">import gzip</span><br><span class="line">from datetime import datetime, timedelta</span><br><span class="line">from beem.blockchain import Blockchain</span><br><span class="line">try:</span><br><span class="line">    from cPickle import dumps, loads</span><br><span class="line">except ImportError:</span><br><span class="line">    from pickle import dumps, loads</span><br><span class="line"></span><br><span class="line">def s_dump_binary(elt_to_pickle, file_obj):</span><br><span class="line">    pickled_elt_str = dumps(elt_to_pickle)</span><br><span class="line">    file_obj.write(hexlify(pickled_elt_str))</span><br><span class="line">    file_obj.write(bytes(&apos;\n&apos;.encode(&quot;latin1&quot;)))</span><br><span class="line"></span><br><span class="line">def s_load_binary(file_obj):</span><br><span class="line">    for line in file_obj:</span><br><span class="line">        elt = loads(unhexlify(line[:-1]))</span><br><span class="line">        yield elt</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    blockchain = Blockchain()</span><br><span class="line">    threading = True</span><br><span class="line">    thread_num = 8</span><br><span class="line">    cur_block = blockchain.get_current_block()</span><br><span class="line">    stop = cur_block.identifier</span><br><span class="line">    startdate = cur_block.time() - timedelta(seconds=3600)</span><br><span class="line">    start = blockchain.get_estimated_block_num(startdate, accurate=True)</span><br><span class="line">    outf = gzip.open(&apos;blocks1.pkl&apos;, &apos;w&apos;)</span><br><span class="line">    blocks = 0</span><br><span class="line">    for block in blockchain.stream(opNames=[], start=start, stop=stop, threading=threading, thread_num=thread_num):</span><br><span class="line">        s_dump_binary(block, outf)</span><br></pre></td></tr></tbody></table></figure>
<p>The block data can be read by:</p>
<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for block in s_load_binary(gzip.open(&apos;blocks1.pkl&apos;)):</span><br><span class="line">    print(block)</span><br></pre></td></tr></tbody></table></figure>
<h1 id="Full-API-node-benchmark-script"><a href="#Full-API-node-benchmark-script" class="headerlink" title="Full API node benchmark script"></a>Full API node benchmark script</h1><p>I added under examples a benchmark script <a href="https://github.com/holgern/beem/blob/master/examples/benchmark_nodes2.py" target="_blank" rel="noopener">benchmark_nodes2.py</a> from which the results can be seen in this post: <a href="https://steemit.com/steemdev/@holger80/full-api-node-statistics-with-beem-april-10th-2018" target="_blank" rel="noopener">full-api-node-statistics-with-beem-april-10th-2018</a></p>
<h1 id="Changes"><a href="#Changes" class="headerlink" title="Changes"></a>Changes</h1><h2 id="rpc-improvements"><a href="#rpc-improvements" class="headerlink" title="rpc improvements"></a>rpc improvements</h2><ul>
<li><a href="https://github.com/holgern/beem/commit/2011b8ea5df03d9b9782b44b9de80bc204c462a0" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/2011b8ea5df03d9b9782b44b9de80bc204c462a0</a><h3 id="account"><a href="#account" class="headerlink" title="account"></a>account</h3></li>
<li>function for reputation to score calculation</li>
<li>Doku improved<h3 id="amount"><a href="#amount" class="headerlink" title="amount"></a>amount</h3></li>
<li>better handling of offline mode<h3 id="steem"><a href="#steem" class="headerlink" title="steem"></a>steem</h3></li>
<li>Doku improved<h3 id="transactionbuilder"><a href="#transactionbuilder" class="headerlink" title="transactionbuilder"></a>transactionbuilder</h3></li>
<li>handing of appbase for tx verify and broadcast improved<h3 id="utils"><a href="#utils" class="headerlink" title="utils"></a>utils</h3></li>
<li>node list added as function</li>
<li>not needed function removed<h3 id="steemnoderpc"><a href="#steemnoderpc" class="headerlink" title="steemnoderpc"></a>steemnoderpc</h3></li>
<li>handling of server errors improved<h3 id="objects"><a href="#objects" class="headerlink" title="objects"></a>objects</h3></li>
<li>Amount fixed for appbase<h3 id="exception"><a href="#exception" class="headerlink" title="exception"></a>exception</h3></li>
<li>RPCErrorDoRetry added, when a rpc call should be retried<h3 id="grapherpc"><a href="#grapherpc" class="headerlink" title="grapherpc"></a>grapherpc</h3></li>
<li>Handling of server error 500 to 511 added</li>
<li>better handling when get_config does not work<h3 id="unit-tests"><a href="#unit-tests" class="headerlink" title="unit tests"></a>unit tests</h3></li>
<li>nodes and nodes_appbase are take from utils</li>
<li>keys is used instead of wif for Steem()</li>
<li>unit test for broadcast added</li>
<li>unit test for appbase for verify added</li>
<li>test_operations added</li>
<li>test_types added<h2 id="More-Unit-tests"><a href="#More-Unit-tests" class="headerlink" title="More Unit tests"></a>More Unit tests</h2></li>
<li><a href="https://github.com/holgern/beem/commit/9a72a1c558952d456ee3f5d667e6a36f5f54a2c5" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/9a72a1c558952d456ee3f5d667e6a36f5f54a2c5</a></li>
<li>More unit tests</li>
<li>Handling of Amount for Appbase improved</li>
<li>Fixed unit tests for Python 2.7<h2 id="Improve-handling-of-lists-as-rpc-reply"><a href="#Improve-handling-of-lists-as-rpc-reply" class="headerlink" title="Improve handling of lists as rpc reply"></a>Improve handling of lists as rpc reply</h2></li>
<li><a href="https://github.com/holgern/beem/commit/97e8fcb1f82b4f6fb2bbdd31c6e667e5290f2dbe" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/97e8fcb1f82b4f6fb2bbdd31c6e667e5290f2dbe</a><h2 id="Improve-coverage-for-graphenerpc"><a href="#Improve-coverage-for-graphenerpc" class="headerlink" title="Improve coverage for graphenerpc"></a>Improve coverage for graphenerpc</h2></li>
<li><a href="https://github.com/holgern/beem/commit/478518897c1c1726f3f540f0813342a469888bb7" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/478518897c1c1726f3f540f0813342a469888bb7</a><h2 id="Transactionbuilder-improved-and-more-unit-tests"><a href="#Transactionbuilder-improved-and-more-unit-tests" class="headerlink" title="Transactionbuilder improved and more unit tests"></a>Transactionbuilder improved and more unit tests</h2></li>
<li><a href="https://github.com/holgern/beem/commit/56f22b04a23bbcdfae1ccbc509107f96c73b5e2e" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/56f22b04a23bbcdfae1ccbc509107f96c73b5e2e</a><h3 id="Steem"><a href="#Steem" class="headerlink" title="Steem"></a>Steem</h3></li>
<li>vests_to_sbd and vests_to_rshares added</li>
<li>rshares_to_vote_pct let you calculate how many voting percentage are needed  to vote with a desired rshares amount</li>
<li>app can be set for post, when not set, it is set to beem/version</li>
<li>Doku improved<h3 id="Transactionbuilder"><a href="#Transactionbuilder" class="headerlink" title="Transactionbuilder"></a>Transactionbuilder</h3></li>
<li>Doku improved</li>
<li>proposer from <strong>ini</strong> removed, as it had no function</li>
<li>_is_signed and _is_constructed fixed</li>
<li>reconstruct_tx added to sign and addSigningInformation, when set to False, previous signatures are not deleted anymore</li>
<li>KeyNotFound exception handled<h3 id="Wallet"><a href="#Wallet" class="headerlink" title="Wallet"></a>Wallet</h3></li>
<li>KeyNotFound exception handled, when more than one key_auths are available<h3 id="Graphenerpc"><a href="#Graphenerpc" class="headerlink" title="Graphenerpc"></a>Graphenerpc</h3></li>
<li>version string set to user-agent<h3 id="Publickey"><a href="#Publickey" class="headerlink" title="Publickey"></a>Publickey</h3></li>
<li>Doku improved<h3 id="Unit-tests"><a href="#Unit-tests" class="headerlink" title="Unit tests"></a>Unit tests</h3><h3 id="test-steem"><a href="#test-steem" class="headerlink" title="test_steem:"></a>test_steem:</h3></li>
<li>test for test_post improved</li>
<li>test_sp_to_sbd and test_rshares_to_vote_pct added<h3 id="tst-testnet"><a href="#tst-testnet" class="headerlink" title="tst_testnet:"></a>tst_testnet:</h3></li>
<li>test_wallet_keys added  for testing the wallet</li>
<li>test_transfer_1of1, test_transfer_2of2_simple, test_transfer_2of2_wallet and test_transfer_2of2_serialized_deserialized added thanks to @leprechaun<h2 id="Examples-added"><a href="#Examples-added" class="headerlink" title="Examples added"></a>Examples added</h2></li>
<li><a href="https://github.com/holgern/beem/commit/d6609e7f72623792751579fa9ea68fbd9d541ee9" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/d6609e7f72623792751579fa9ea68fbd9d541ee9</a><h3 id="Wallet-1"><a href="#Wallet-1" class="headerlink" title="Wallet"></a>Wallet</h3></li>
<li>KeyNotFound raised when no key is found<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h3 id="write-blocks-to-file"><a href="#write-blocks-to-file" class="headerlink" title="write blocks to file"></a>write blocks to file</h3></li>
<li>decodes streamed blocks to numbers with hexlify and write them line by line as gzip compressed file<h3 id="post-to-html"><a href="#post-to-html" class="headerlink" title="post_to_html"></a>post_to_html</h3></li>
<li>creates a html page from any given authorperm string<h3 id="post-to-md"><a href="#post-to-md" class="headerlink" title="post_to_md"></a>post_to_md</h3></li>
<li>saves the markdown code from any given authorperm link<h3 id="Unit-tests-1"><a href="#Unit-tests-1" class="headerlink" title="Unit tests"></a>Unit tests</h3>test_vote improved<h2 id="Refactoring-and-improvements"><a href="#Refactoring-and-improvements" class="headerlink" title="Refactoring and improvements"></a>Refactoring and improvements</h2></li>
<li><a href="https://github.com/holgern/beem/commit/d2a9563bb2a1138bf64a5377cab72bd873842c24" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/d2a9563bb2a1138bf64a5377cab72bd873842c24</a><h3 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h3></li>
<li>Check added for empty returns<br>Market</li>
<li>refactoring</li>
<li>Checks added fro empty rpc returns<h3 id="storage"><a href="#storage" class="headerlink" title="storage"></a>storage</h3></li>
<li>default nodes are taken from utils.get_node_list<h3 id="Vote"><a href="#Vote" class="headerlink" title="Vote"></a>Vote</h3></li>
<li>Check added for empty rpc calls</li>
<li>Check added for Unkown key return<h3 id="Exception"><a href="#Exception" class="headerlink" title="Exception"></a>Exception</h3></li>
<li>UnkownKey added<h3 id="Steemnoderpc"><a href="#Steemnoderpc" class="headerlink" title="Steemnoderpc"></a>Steemnoderpc</h3></li>
<li>set_next_node_on_empty_reply added, to add a check on empty returns on the next rpc call</li>
<li>Refactoring</li>
<li>UnkownKey exception added<h3 id="Transaction"><a href="#Transaction" class="headerlink" title="Transaction"></a>Transaction</h3></li>
<li>refactoring<h3 id="Unit-tests-2"><a href="#Unit-tests-2" class="headerlink" title="Unit tests"></a>Unit tests</h3></li>
<li>test_vote improve and check for VoteDoesNotExistsException added<h2 id="Add-clearWifs-and-improve-unit-tests"><a href="#Add-clearWifs-and-improve-unit-tests" class="headerlink" title="Add clearWifs and improve unit tests"></a>Add clearWifs and improve unit tests</h2></li>
<li><a href="https://github.com/holgern/beem/commit/2d364c670eaed95b7f9ad275898b8431446a6e9c" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/2d364c670eaed95b7f9ad275898b8431446a6e9c</a><h2 id="Transactionbuild"><a href="#Transactionbuild" class="headerlink" title="Transactionbuild"></a>Transactionbuild</h2></li>
<li>add clearWifs<h2 id="Examples-1"><a href="#Examples-1" class="headerlink" title="Examples"></a>Examples</h2></li>
<li>use nodes from get_node_list<h2 id="test-testnet"><a href="#test-testnet" class="headerlink" title="test_testnet"></a>test_testnet</h2></li>
<li>improved tests for Transactionbuilder<h2 id="benchmark-nodes2-added"><a href="#benchmark-nodes2-added" class="headerlink" title="benchmark_nodes2 added"></a>benchmark_nodes2 added</h2></li>
<li><a href="https://github.com/holgern/beem/commit/c30aa2b6858bba631d842fe9739448f1ca391396" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/c30aa2b6858bba631d842fe9739448f1ca391396</a><h3 id="Graphenerpc-1"><a href="#Graphenerpc-1" class="headerlink" title="Graphenerpc"></a>Graphenerpc</h3></li>
<li>Handling for Connectionerror for request posts added</li>
<li>Each node has its own error count now<h3 id="benchmark-nodes2-added-1"><a href="#benchmark-nodes2-added-1" class="headerlink" title="benchmark_nodes2 added"></a>benchmark_nodes2 added</h3><h2 id="metadata-to-dict-added-to-comment"><a href="#metadata-to-dict-added-to-comment" class="headerlink" title="_metadata_to_dict added to comment"></a>_metadata_to_dict added to comment</h2></li>
<li><a href="https://github.com/holgern/beem/commit/52203d95f2c718daca272f77b974703011da39de" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/52203d95f2c718daca272f77b974703011da39de</a><h3 id="test-comment"><a href="#test-comment" class="headerlink" title="test_comment"></a>test_comment</h3></li>
<li>preselect working node<h2 id="Improved-numerical-calculation-of-votes"><a href="#Improved-numerical-calculation-of-votes" class="headerlink" title="Improved numerical calculation of votes"></a>Improved numerical calculation of votes</h2></li>
<li><a href="https://github.com/holgern/beem/commit/5ea3ebbe5a7bb81d92ef5ead3cca1d9eee5f1e55" target="_blank" rel="noopener">https://github.com/holgern/beem/commit/5ea3ebbe5a7bb81d92ef5ead3cca1d9eee5f1e55</a><h3 id="Steem-1"><a href="#Steem-1" class="headerlink" title="Steem"></a>Steem</h3></li>
<li>max_vote_denom is corrected and calculated as in steemit/steem<h3 id="beemgrapheneapi"><a href="#beemgrapheneapi" class="headerlink" title="beemgrapheneapi"></a>beemgrapheneapi</h3></li>
<li>handling of empty replies added</li>
</ul>
<p><br></p><hr><em>Posted on <a href="https://utopian.io/utopian-io/@holger80/update-for-beem-transactionbuilder-and-steemnoderpc-improved" target="_blank" rel="noopener">Utopian.io -  Rewarding Open Source Contributors</a></em><hr><p></p>
<hr>
<p>This page is synchronized from the post: <a href="https://steemit.com/@holger80/update-for-beem-transactionbuilder-and-steemnoderpc-improved" target="_blank" rel="noopener">&#x2018;Update for beem - transactionbuilder and SteemNodeRPC  improved&#x2019;</a></p>
<script>document.querySelectorAll(".not-gallery-item").forEach(e=>{if(!e.dataset.src)return;const t=document.createElement("img");t.style="display:none !important;",t.src=e.dataset.src,t.addEventListener("error",()=>{t.remove(),e.style.color="inherit",e.style.backgroundImage="none",e.style.background="none"}),t.addEventListener("load",()=>{t.remove()}),document.body.appendChild(t)});</script>
        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/@holger80/tags/appbase/">appbase</a>, <a class="has-link-grey -link" href="/@holger80/tags/beem/">beem</a>, <a class="has-link-grey -link" href="/@holger80/tags/python/">python</a>, <a class="has-link-grey -link" href="/@holger80/tags/steemdev/">steemdev</a>, <a class="has-link-grey -link" href="/@holger80/tags/utopian-io/">utopian-io</a>
                </div>
            </div>
        </div>
        
        
        
        
<div class="sharethis-inline-share-buttons"></div>
<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ab6f60ace89f00013641890&amp;product=inline-share-buttons" async="async"></script>

        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/@holger80/how-to-get-a-good-rating-for-your-utopian-io-contribution/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">How to get a good rating for your utopian-io contribution</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/@holger80/full-api-node-statistics-with-beem-april-10th-2018/">
                <span class="level-item">Full API node statistics with beem - April 10th 2018</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>


</div>
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/@holger80/">
                
                    <img src="https://avatars0.githubusercontent.com/u/50857551?s=200&v=4" alt="Holger" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Holger&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en_US.UTF-8");</script>


    
    
    
    <script src="/@holger80/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>document.addEventListener("DOMContentLoaded",function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})});</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>document.addEventListener("DOMContentLoaded",function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})});</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>



    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    
    

    
    
    





    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Entradas",PAGES:"Pages",CATEGORIES:"Categorias",TAGS:"Etiquetas",UNTITLED:"(Untitled)"},CONTENT_URL:"/@holger80/content.json"};</script>



    
<script src="/@holger80/js/bundle.js" defer></script></body>
</html>

