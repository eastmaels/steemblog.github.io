
<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>SteemJs: How Many Witnesses are Running on 23.1? - justyy</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">









<link rel="icon" href="https://www.easyicon.net/api/resizeApi.php?id=1185564&size=32">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    




    
    

    
    
    
    

    
    

<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/@justyy/css/style.css">

<link rel="stylesheet" href="/@justyy/css/bundle.css"></head>
<body class="is-2-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/@justyy/">
            
                <img src="https://avatars0.githubusercontent.com/u/50857551?s=200&v=4" alt="justyy" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/@justyy/">Home</a>
                
                <a class="navbar-item" href="/@justyy/archives">Archives</a>
                
                <a class="navbar-item" href="/@justyy/categories">Categories</a>
                
                <a class="navbar-item" href="/@justyy/tags">Tags</a>
                
                <a class="navbar-item" href="/@justyy/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>

    
    <section class="section">
        <div class="container">
            <div class="columns">
                

                





<div class="column is-4-tablet is-4-desktop is-4-widescreen  has-order-3 column-right is-sticky">
    
        
<div class="card widget" id="toc">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Catalogue
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#Get-All-Witnesses">
        <span class="has-mr-6">1</span>
        <span>Get All Witnesses</span>
        </a></li><li>
        <a class="is-flex" href="#Get-All-Witnesses-Accounts">
        <span class="has-mr-6">2</span>
        <span>Get All Witnesses Accounts</span>
        </a></li><li>
        <a class="is-flex" href="#Filtering">
        <span class="has-mr-6">3</span>
        <span>Filtering</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#The-answer-is-46-witnesses-are-running-on-23-1-and-all-of-them-are-active">
        <span class="has-mr-6">3.1</span>
        <span>The answer is 46 witnesses are running on 23.1 and all of them are active.</span>
        </a></li><li>
        <a class="is-flex" href="#Visit-me-at-https-steemyy-com">
        <span class="has-mr-6">3.2</span>
        <span>Visit me at:  https://steemyy.com</span>
        </a></li></ul></li></ul>
        </div>
    </div>
</div>


    
    
</div>


                <script src="/@justyy/js/pjax-widget.js"></script>

                <div class="column is-8-tablet is-8-desktop is-8-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span class="image is-7by1">
            <img class="thumbnail" src="https://cdn.steemitimages.com/DQmZcg5iThqQD4uUQwFsxtRBGm8DPxFP5q7ziRca1XJ9hnM/image.png" alt="SteemJs: How Many Witnesses are Running on 23.1?">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-06-06T18:52:03.000Z">2020-06-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/@justyy/categories/witness-category/">witness-category</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 397 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                SteemJs: How Many Witnesses are Running on 23.1?
            
        </h1>
        <div class="content">
            <p>How many witnesses are running on 23.1 and how many of them are active? It turns out answering this question does not require preprocess blocks on steem blockchain e.g. SteemSQL. Rather, we can get the answer by pure SteemJS.</p>
<h1 id="Get-All-Witnesses"><a href="#Get-All-Witnesses" class="headerlink" title="Get All Witnesses"></a>Get All Witnesses</h1><p>First, we can use the <code>steemp.api.getWitnessCount</code> to return the list of all registered witnesses - which is a lot more than we thought, currently more than 1400 witnesses but of course many of them have been disabled or never produced a block.</p>
<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function getTotalWitnesses() {</span><br><span class="line">    return new Promise((resolve, reject) =&gt; {</span><br><span class="line">      steem.api.getWitnessCount(function(err, result) {</span><br><span class="line">          if (!err) {</span><br><span class="line">              resolve(result);</span><br><span class="line">          } else {</span><br><span class="line">              reject(err);</span><br><span class="line">          }</span><br><span class="line">      });</span><br><span class="line">    });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1 id="Get-All-Witnesses-Accounts"><a href="#Get-All-Witnesses-Accounts" class="headerlink" title="Get All Witnesses Accounts"></a>Get All Witnesses Accounts</h1><p>Then, we can use <code>steem.api.getWitnesses</code> to retreive the witnesses information for multiple accounts at the same time. </p>
<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function getAllWitnessAccounts(total) {</span><br><span class="line">    return new Promise((resolve, reject) =&gt; {</span><br><span class="line">          steem.api.getWitnesses([...Array(total).keys()], function(err, result) {</span><br><span class="line">            if (!err) {</span><br><span class="line">                resolve(result);</span><br><span class="line">            } else {</span><br><span class="line">                reject(err);</span><br><span class="line">           }</span><br><span class="line">        });</span><br><span class="line">    });</span><br><span class="line">}   </span><br><span class="line">`</span><br></pre></td></tr></tbody></table></figure>
<h1 id="Filtering"><a href="#Filtering" class="headerlink" title="Filtering"></a>Filtering</h1><p>Then, we can chain those two functions to filter out those witnesses that are running 23.1 and are active.</p>
<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(async function () {</span><br><span class="line">    const totalWitnesses = await getTotalWitnesses();</span><br><span class="line">    let data = await getAllWitnessAccounts(totalWitnesses);</span><br><span class="line">    log(data.filter(x =&gt; {</span><br><span class="line">        return x.running_version === &quot;0.23.1&quot; &amp;&amp; (x.signing_key !== &quot;STM1111111111111111111111111111111114T1Anm&quot;);</span><br><span class="line">    }).length);</span><br><span class="line">})();</span><br></pre></td></tr></tbody></table></figure>
<h3 id="The-answer-is-46-witnesses-are-running-on-23-1-and-all-of-them-are-active"><a href="#The-answer-is-46-witnesses-are-running-on-23-1-and-all-of-them-are-active" class="headerlink" title="The answer is 46 witnesses are running on 23.1 and all of them are active."></a>The answer is 46 witnesses are running on 23.1 and all of them are active.</h3><p>Run the code using <a href="https://steemyy.com/steemjs/?s=function%20getTotalWitnesses()%20%7B%0D%0A%20%20%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20steem.api.getWitnessCount(function(err%2C%20result)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(!err)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(result)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20reject(err)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D)%3B%0D%0A%7D%0D%0A%0D%0Afunction%20getAllWitnessAccounts(total)%20%7B%0D%0A%20%20%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20steem.api.getWitnesses(%5B...Array(total).keys()%5D%2C%20function(err%2C%20result)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!err)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(result)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20reject(err)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D)%3B%0D%0A%7D%20%20%20%0D%0A%0D%0A(async%20function%20()%20%7B%0D%0A%20%20%20%20const%20totalWitnesses%20%3D%20await%20getTotalWitnesses()%3B%0D%0A%20%20%20%20let%20data%20%3D%20await%20getAllWitnessAccounts(totalWitnesses)%3B%0D%0A%20%20%20%20log(data.filter(x%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x.running_version%20%3D%3D%3D%20%220.23.1%22%20%26%26%20(x.signing_key%20!%3D%3D%20%22STM1111111111111111111111111111111114T1Anm%22)%3B%0D%0A%20%20%20%20%7D).length)%3B%0D%0A%7D)()%3B%0D%0A" target="_blank" rel="noopener">SteemJs</a></p>
<p>Slightly changing the query, we know:<br>There are 24 Witnesses running at 0.23.0 but they are disabled.<br>And there are 9 witnesses running at 0.23.0 and they are &#x2018;active&#x2019; which may be those HIVE witnesses who didn&#x2019;t take offline they witnesses.</p>
<p>BTW, i have added the dSteem into the SteemJs tool:  <a href="https://steemyy.com/steemjs/" target="_blank" rel="noopener">https://steemyy.com/steemjs/</a><br><img src="https://cdn.steemitimages.com/DQmZcg5iThqQD4uUQwFsxtRBGm8DPxFP5q7ziRca1XJ9hnM/image.png" alt="image.png"></p>
<hr>

<p>Every little helps! I hope this helps!</p>
<p><strong>Steem On!~</strong></p>
<hr>
<p>If you like my work, please consider voting for me, thanks!<br><a href="https://steemit.com/~witnesses" target="_blank" rel="noopener">https://steemit.com/~witnesses</a> type in <strong>justyy</strong> and click <strong><em>VOTE</em></strong><br><img src="https://steemyy.com/images/vote-for-justyy.jpg" alt=""></p>
<p><br><br><strong>Alternatively, you could <a href="https://steemyy.com/witness-voting/?witness=justyy&amp;action=proxy" target="_blank" rel="noopener">proxy to me</a>  if you are too lazy to vote!</strong></p>
<p>Also: you can vote me at the tool I made:  <a href="https://steemyy.com/witness-voting/?witness=justyy" target="_blank" rel="noopener">https://steemyy.com/witness-voting/?witness=justyy</a></p>
<h3 id="Visit-me-at-https-steemyy-com"><a href="#Visit-me-at-https-steemyy-com" class="headerlink" title="Visit me at:  https://steemyy.com"></a>Visit me at:  <a href="https://steemyy.com" target="_blank" rel="noopener">https://steemyy.com</a></h3><hr>
<p>This page is synchronized from the post: <a href="https://steemit.com/@justyy/steemjs-how-many-witnesses-are-running-on-23-1" target="_blank" rel="noopener">&#x2018;SteemJs: How Many Witnesses are Running on 23.1?&#x2019;</a></p>
<script>document.querySelectorAll(".not-gallery-item").forEach(e=>{if(!e.dataset.src)return;const t=document.createElement("img");t.style="display:none !important;",t.src=e.dataset.src,t.addEventListener("error",()=>{t.remove(),e.style.color="inherit",e.style.backgroundImage="none",e.style.background="none"}),t.addEventListener("load",()=>{t.remove()}),document.body.appendChild(t)});</script>
        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/@justyy/tags/coding/">coding</a>, <a class="has-link-grey -link" href="/@justyy/tags/programming/">programming</a>, <a class="has-link-grey -link" href="/@justyy/tags/steem-witnesses/">steem-witnesses</a>, <a class="has-link-grey -link" href="/@justyy/tags/steemjs/">steemjs</a>, <a class="has-link-grey -link" href="/@justyy/tags/tutorial/">tutorial</a>, <a class="has-link-grey -link" href="/@justyy/tags/whalepower/">whalepower</a>, <a class="has-link-grey -link" href="/@justyy/tags/witness-category/">witness-category</a>
                </div>
            </div>
        </div>
        
        
        
        
<div class="sharethis-inline-share-buttons"></div>
<script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ab6f60ace89f00013641890&amp;product=inline-share-buttons" async="async"></script>

        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/@justyy/new-tool-introducing-a-simple-steem-block-explorer/">
                <span class="level-item">New Tool: Introducing a Simple Steem Block Explorer</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>


</div>
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/@justyy/">
                
                    <img src="https://avatars0.githubusercontent.com/u/50857551?s=200&v=4" alt="justyy" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 justyy&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en_US.UTF-8");</script>


    
    
    
    <script src="/@justyy/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>document.addEventListener("DOMContentLoaded",function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})});</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>document.addEventListener("DOMContentLoaded",function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}})});</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>



    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    
    

    
    
    





    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/@justyy/content.json"};</script>



    
<script src="/@justyy/js/bundle.js" defer></script></body>
</html>

